<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="TestDataGenerator" resourceRoot="" soapui-version="5.5.0" abortOnError="true" runType="SEQUENTIAL" id="d3620e75-1353-46d7-b754-7f7ae25dc739" xmlns:con="http://eviware.com/soapui/config">
    <con:settings/>
    
    <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="orm-aor" type="rest" basePath="/orm-aor/rs/v1/" definitionUrl="http://${#Project#HOST_URL}/orm-aor/rs/v1/?_wadl" id="c8c1214d-a2bb-47f6-86de-033e42a5ada2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://${#Project#HOST_URL}/orm-aor/rs/v1/?_wadl"><con:part><con:url>http://${#Project#HOST_URL}/orm-aor/rs/v1/?_wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:prefix1="http://www.ba.com/schema/aor/AuthenticatedOrderRetrievalV01">
  <grammars>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://www.ba.com/schema/aor/AuthenticatedOrderRetrievalV01" xmlns:tns="http://www.ba.com/schema/aor/AuthenticatedOrderRetrievalV01">
      <xs:element name="RetreiveOrderRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" name="id" type="xs:int"/>
            <xs:element minOccurs="0" name="name" type="xs:string"/>
            <xs:element minOccurs="0" name="eventTimestamp" type="xs:dateTime"/>
            <xs:element minOccurs="0" name="eventDate" type="xs:date"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="RetreiveOrderResponse">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" name="id" type="xs:int"/>
            <xs:element minOccurs="0" name="name" type="xs:string"/>
            <xs:element minOccurs="0" name="result" type="xs:string"/>
            <xs:element minOccurs="0" name="BusinessErrors" type="tns:BusinessErrors"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:complexType name="BusinessErrors">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="BusinessError" type="tns:BusinessError"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="BusinessError">
        <xs:sequence>
          <xs:element name="Code" type="xs:string"/>
          <xs:element minOccurs="0" name="Reason" type="xs:string"/>
          <xs:element minOccurs="0" name="UUID" type="xs:string"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="SubError" type="tns:SubError"/>
          <xs:element name="TimeStamp" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="SubError">
        <xs:sequence>
          <xs:element name="Code" type="xs:string"/>
          <xs:element minOccurs="0" name="Reason" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </grammars>
  <resources base="http://${#Project#HOST_URL}/orm-aor/rs/v1/">
    <resource path="/orders">
      <param name="id" style="matrix" type="xs:int"/>
      <param name="name" style="matrix" type="xs:string"/>
      <method name="GET">
        <request/>
        <response>
          <representation mediaType="application/json" element="prefix1:RetreiveOrderResponse"/>
        </response>
      </method>
      <method name="POST">
        <request>
          <representation mediaType="application/json" element="prefix1:RetreiveOrderRequest"/>
        </request>
        <response>
          <representation mediaType="application/json" element="prefix1:RetreiveOrderResponse"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://${#Project#HOST_URL}</con:endpoint></con:endpoints><con:resource name="/orders" path="orders/{orderReference}" id="246d28e7-23b5-4ece-9373-cf43a9a92a87"><con:settings/><con:parameters><con:parameter><con:name>lastName</con:name><con:value xsi:nil="true"/><con:style>MATRIX</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:int</con:type><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>orderReference</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>tstDisplay</con:name><con:value/><con:style>MATRIX</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" method="GET" id="8b488f62-f4e0-429b-abf7-cb8fd5683120"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xmlns:dem="http://www.ba.com/schema/aor/AuthenticatedOrderRetrievalV01">dem:RetreiveOrderResponse</con:element><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" mediaType="application/json" id="beb86101-397a-4bb6-831c-bd61e320e2e6"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="test" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}</con:endpoint><con:request/><con:originalUri>http://localhost/orm-aor/rs/v1/orders;id=1;name=abcd</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="lastName" value=""/>
  <con:entry key="orderReference" value=""/>
</con:parameters><con:parameterOrder><con:entry>lastName</con:entry><con:entry>orderReference</con:entry><con:entry>tstDisplay</con:entry></con:parameterOrder></con:request></con:method></con:resource>
</con:interface>
    

    
    
    
    
    <con:interface xsi:type="con:WsdlInterface" id="28d3526a-246a-4124-97f0-369e7cae60bb" wsaVersion="NONE" name="passengerReaccommodatePortTypeSoap11" type="wsdl" bindingName="{http://www.ba.com/schema/orm/PassengerReAccommodationV03}passengerReaccommodatePortTypeSoap11" soapVersion="1_1" anonymous="optional" definition="http://captwows-prelive.baplc.com/orm-prac-3/PassengerReaccommodationV03.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://captwows-prelive.baplc.com/orm-prac-3/PassengerReaccommodationV03.wsdl"><con:part><con:url>http://captwows-prelive.baplc.com/orm-prac-3/PassengerReaccommodationV03.wsdl</con:url><con:content><![CDATA[<wsdl:definitions targetNamespace="http://www.ba.com/schema/orm/PassengerReAccommodationV03" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:sch="http://www.ba.com/schema/orm/PassengerReAccommodationV03" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://www.ba.com/schema/orm/PassengerReAccommodationV03">
  <wsdl:types>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.ba.com/schema/orm/PassengerReAccommodationV03" version="3.0" xmlns:prac="http://www.ba.com/schema/orm/PassengerReAccommodationV03" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <!--The type: PassengerReAccommodationV03.CustomHeaderParameters-->
      <xs:complexType name="CustomHeaderParameters">
        <xs:annotation>
          <xs:documentation>Holder for HTTP Header name and value pairs.
This type is for internal service logic, invoking applications should not set any values.
If any values are set, that would be overridden.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="Name" type="xs:string">
            <xs:annotation>
              <xs:documentation>Holds the Name of the Custom Header Parameter.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="Value" type="xs:string">
            <xs:annotation>
              <xs:documentation>Holds the Value of the Custom Header Parameter.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.DispositionTypeEnum-->
      <xs:simpleType name="DispositionTypeEnum">
        <xs:annotation>
          <xs:documentation>Holds the list of possible disposition types.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
          <xs:enumeration value="Rebook"/>
          <xs:enumeration value="Reticket"/>
        </xs:restriction>
      </xs:simpleType>
      <!--The type: PassengerReAccommodationV03.ErrorType-->
      <xs:complexType name="ErrorType">
        <xs:annotation>
          <xs:documentation>Holds any Functional/Technical error details</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="ErrorCode" type="xs:string">
            <xs:annotation>
              <xs:documentation>Unique Code that is assigned for each of the error type</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="Reason" type="xs:string">
            <xs:annotation>
              <xs:documentation>Supporting reason for the error code, due to which the passenger reaccommodation operation failed</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="DateTimeStamp" type="xs:dateTime">
            <xs:annotation>
              <xs:documentation>Date with time stamp on which the error occured</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="SupplementaryInformation" type="xs:string">
            <xs:annotation>
              <xs:documentation>Additional information about the error</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.Flight-->
      <xs:complexType name="Flight">
        <xs:annotation>
          <xs:documentation>This type is to hold arrival, departure and other flight segment related information</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="DepartureAirportIATACode">
            <xs:annotation>
              <xs:documentation>Departure airport or city code.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([A-Z]{3})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="DepartureDate">
            <xs:annotation>
              <xs:documentation>Departure Date.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([0-9]{6})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="DepartureTime">
            <xs:annotation>
              <xs:documentation>Departure Time.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([0-9]{4})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="DepartureUTCOffsetTime">
            <xs:annotation>
              <xs:documentation>Departure UTC Offset Time</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([+\-][0-9]{2}:[0-9]{2})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="ArrivalAirportIATACode">
            <xs:annotation>
              <xs:documentation>Arrival airport or city code.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([A-Z]{3})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="ArrivalDate">
            <xs:annotation>
              <xs:documentation>Arrival Date.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([0-9]{6})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="ArrivalTime">
            <xs:annotation>
              <xs:documentation>Arrival Time.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([0-9]{4})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="ArrivalUTCOffsetTime" type="xs:string">
            <xs:annotation>
              <xs:documentation>Arrival UTC Offset Time.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="CabinCode">
            <xs:annotation>
              <xs:documentation>Cabin code for the ordered flight segment.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:length value="1"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="OperatingSellingClass" type="xs:string">
            <xs:annotation>
              <xs:documentation>Class of service as decided by the carrier that operates the flight segment.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="CommercialSellingClass" type="xs:string">
            <xs:annotation>
              <xs:documentation>Class of service as decided by the carrier that markets the flight segment.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="MarketingCarrier" type="prac:FlightCode">
            <xs:annotation>
              <xs:documentation>Holds Marketing carrier details like carrier code, flight number.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="OperatingCarrier" type="prac:FlightCode">
            <xs:annotation>
              <xs:documentation>Holds Operating carrier details.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.FlightCode-->
      <xs:complexType name="FlightCode">
        <xs:annotation>
          <xs:documentation>Holder for flight code and carrier details</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="FlightNumber">
            <xs:annotation>
              <xs:documentation>Flight number. Numberic value.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:pattern value="([0-9]{1,4})"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="FlightSuffix">
            <xs:annotation>
              <xs:documentation>Flight suffix.</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:length value="1"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="CarrierCode" type="xs:string">
            <xs:annotation>
              <xs:documentation>IATA airline code for the operating airline.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.FlightStatusEnum-->
      <xs:simpleType name="FlightStatusEnum">
        <xs:annotation>
          <xs:documentation>Holds the list of flight status that are appropriate to this ReaccommodatePassenger service.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
          <xs:enumeration value="Disrupted"/>
          <xs:enumeration value="Impacted"/>
          <xs:enumeration value="New"/>
          <xs:enumeration value="Unaffected"/>
        </xs:restriction>
      </xs:simpleType>
      <!--The type: PassengerReAccommodationV03.Headers-->
      <xs:complexType name="Headers">
        <xs:annotation>
          <xs:documentation>Holder for CustomHeaderParameters.
This element is for internal service logic, invoking application sould never set any values.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element maxOccurs="50" name="CustomHeaderParameters" type="prac:CustomHeaderParameters">
            <xs:annotation>
              <xs:documentation>Holder for Custom Header Parameters.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.Order-->
      <xs:complexType name="Order">
        <xs:annotation>
          <xs:documentation>This object holds the order and its other details. 
Booking record is treated as an order.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="OrderNumber" type="xs:string">
            <xs:annotation>
              <xs:documentation>Order Number of the booking to be reaccommodated.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="PaxCount" type="xs:integer">
            <xs:annotation>
              <xs:documentation>Holds the number of passengers associated with this Order.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="20" name="Remark">
            <xs:annotation>
              <xs:documentation>Remark that is to be added in the booking. e.g, Corporate remark (RX)</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:maxLength value="126"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element minOccurs="0" name="MissedConnectionIndicator" type="xs:boolean">
            <xs:annotation>
              <xs:documentation>Indicates whether to add SK MSCN to new BA flight segments in the rebooked PNR. If the value is True, this special Keyword will be added.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element maxOccurs="16" minOccurs="2" name="OrderLine" type="prac:OrderLine">
            <xs:annotation>
              <xs:documentation>Holder for Order Line element.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.OrderLine-->
      <xs:complexType name="OrderLine">
        <xs:annotation>
          <xs:documentation>Element to hold order line information. Currently, booking record is treated as order, so orderline element holds the details of the flight and passengers.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element name="FlightStatus" type="prac:FlightStatusEnum">
            <xs:annotation>
              <xs:documentation>Hods status of the flight. Eg, Disrupted, Unaffected, New ,Impacted</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="Flight" type="prac:Flight">
            <xs:annotation>
              <xs:documentation>Holder for Flight Segment element.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.ReaccommodatePassengerRequest-->
      <xs:element name="ReaccommodatePassengerRequest" type="prac:ReaccommodatePassengerRequest"/>
      <xs:complexType name="ReaccommodatePassengerRequest">
        <xs:annotation>
          <xs:documentation>ReaccommodatePassenger operation's request element. 
ReaccommodatePassenger operation supports rebook and re-issue of the disrupted/impacted itinerary with the recommended new itinerary.
Request element carries the order number, original (disrupted, impacted and/or unaffected) itineraries and the recommended new itinerary.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element minOccurs="0" name="Headers" type="prac:Headers">
            <xs:annotation>
              <xs:documentation>Contains Header details that the service uses internally.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="Order" type="prac:Order">
            <xs:annotation>
              <xs:documentation>Holder for Order element. A request can have only one order to be rebooked &amp; reissued.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.ReaccommodatePassengerResponse-->
      <xs:element name="ReaccommodatePassengerResponse" type="prac:ReaccommodatePassengerResponse"/>
      <xs:complexType name="ReaccommodatePassengerResponse">
        <xs:annotation>
          <xs:documentation>ReaccommodatePassenger operation's response element.
If successfully rebooked and reissueed, then response element returns success along with the order number. Email notification will be sent to customer with the recommended new itinerary.
During failure, a reasoning error message is returned along with the disposition type ie., Rebook/Reissue, where failed. Email notification will not be sent to customer.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element maxOccurs="10" minOccurs="0" name="Error" type="prac:ErrorType">
            <xs:annotation>
              <xs:documentation>Holder for Error Type, returned over failure of Reaccommodate Passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="OrderNumber" type="xs:string">
            <xs:annotation>
              <xs:documentation>This element holds the Order Number.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="ReaccommodateStatus" type="prac:ReaccommodateStatusTypeEnum">
            <xs:annotation>
              <xs:documentation>Holds the status of reaccommodate passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="DispositionType" type="prac:DispositionTypeEnum">
            <xs:annotation>
              <xs:documentation>Holds the activity that has been completed or failed at the end of the Reaccommodate Passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="Headers" type="prac:Headers">
            <xs:annotation>
              <xs:documentation>Contains Header details that the service uses internally.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.ReaccommodatePassengerWithoutNotificationRequest-->
      <xs:element name="ReaccommodatePassengerWithoutNotificationRequest" type="prac:ReaccommodatePassengerWithoutNotificationRequest"/>
      <xs:complexType name="ReaccommodatePassengerWithoutNotificationRequest">
        <xs:annotation>
          <xs:documentation>ReaccommodatePassengerWithoutNotification operation's request element. 
ReaccommodatePassengerWithoutNotification operation supports rebook and re-issue of the disrupted/impacted itinerary with the recommended new itinerary.
Request element carries the order number, original (disrupted, impacted and/or unaffected) itineraries and the recommended new itinerary.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element minOccurs="0" name="Headers" type="prac:Headers">
            <xs:annotation>
              <xs:documentation>Contains Header details that the service uses internally.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="Order" type="prac:Order">
            <xs:annotation>
              <xs:documentation>Holder for Order element. A request can have only one order to be rebooked &amp; reissued.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.ReaccommodatePassengerWithoutNotificationResponse-->
      <xs:element name="ReaccommodatePassengerWithoutNotificationResponse" type="prac:ReaccommodatePassengerWithoutNotificationResponse"/>
      <xs:complexType name="ReaccommodatePassengerWithoutNotificationResponse">
        <xs:annotation>
          <xs:documentation>ReaccommodatePassengerWithoutNotification operation's response element.
If successfully rebooked and reissueed, then response element returns success along with the order number.
During failure, a reasoning error message is returned along with the disposition type ie., Rebook/Reissue, where failed.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
          <xs:element maxOccurs="10" minOccurs="0" name="Error" type="prac:ErrorType">
            <xs:annotation>
              <xs:documentation>Holder for Error Type, returned over failure of Reaccommodate Passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="OrderNumber" type="xs:string">
            <xs:annotation>
              <xs:documentation>This element holds the Order Number.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="ReaccommodateStatus" type="prac:ReaccommodateStatusTypeEnum">
            <xs:annotation>
              <xs:documentation>Holds the status of reaccommodate passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element name="DispositionType" type="prac:DispositionTypeEnum">
            <xs:annotation>
              <xs:documentation>Holds the activity that has been completed or failed at the end of the Reaccommodate Passenger operation.</xs:documentation>
            </xs:annotation>
          </xs:element>
          <xs:element minOccurs="0" name="Headers" type="prac:Headers">
            <xs:annotation>
              <xs:documentation>Contains Header details that the service uses internally.</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
      <!--The type: PassengerReAccommodationV03.ReaccommodateStatusTypeEnum-->
      <xs:simpleType name="ReaccommodateStatusTypeEnum">
        <xs:annotation>
          <xs:documentation>Holds the two possible reaccommodation status.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
          <xs:enumeration value="Failure"/>
          <xs:enumeration value="Success"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="ReaccommodatePassengerRequest">
    <wsdl:part element="tns:ReaccommodatePassengerRequest" name="ReaccommodatePassengerRequest"/>
  </wsdl:message>
  <wsdl:message name="ReaccommodatePassengerResponse">
    <wsdl:part element="tns:ReaccommodatePassengerResponse" name="ReaccommodatePassengerResponse"/>
  </wsdl:message>
  <wsdl:message name="ReaccommodatePassengerWithoutNotificationRequest">
    <wsdl:part element="tns:ReaccommodatePassengerWithoutNotificationRequest" name="ReaccommodatePassengerWithoutNotificationRequest"/>
  </wsdl:message>
  <wsdl:message name="ReaccommodatePassengerWithoutNotificationResponse">
    <wsdl:part element="tns:ReaccommodatePassengerWithoutNotificationResponse" name="ReaccommodatePassengerWithoutNotificationResponse"/>
  </wsdl:message>
  <wsdl:portType name="passengerReaccommodatePortType">
    <wsdl:operation name="ReaccommodatePassenger">
      <wsdl:input message="tns:ReaccommodatePassengerRequest" name="ReaccommodatePassengerRequest"/>
      <wsdl:output message="tns:ReaccommodatePassengerResponse" name="ReaccommodatePassengerResponse"/>
    </wsdl:operation>
    <wsdl:operation name="ReaccommodatePassengerWithoutNotification">
      <wsdl:input message="tns:ReaccommodatePassengerWithoutNotificationRequest" name="ReaccommodatePassengerWithoutNotificationRequest"/>
      <wsdl:output message="tns:ReaccommodatePassengerWithoutNotificationResponse" name="ReaccommodatePassengerWithoutNotificationResponse"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="passengerReaccommodatePortTypeSoap11" type="tns:passengerReaccommodatePortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="ReaccommodatePassenger">
      <soap:operation soapAction=""/>
      <wsdl:input name="ReaccommodatePassengerRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="ReaccommodatePassengerResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="ReaccommodatePassengerWithoutNotification">
      <soap:operation soapAction=""/>
      <wsdl:input name="ReaccommodatePassengerWithoutNotificationRequest">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="ReaccommodatePassengerWithoutNotificationResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="passengerReaccommodatePortTypeService">
    <wsdl:port binding="tns:passengerReaccommodatePortTypeSoap11" name="passengerReaccommodatePortTypeSoap11">
      <soap:address location="http://captwows-prelive.baplc.com:80/orm-prac-3/PassengerReaccommodationV03"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://captwows-prelive.baplc.com:80/orm-prac-3/PassengerReaccommodationV03</con:endpoint></con:endpoints><con:operation id="731efa8c-51db-4f39-ba5e-1c4923131bb9" isOneWay="false" action="" name="ReaccommodatePassenger" bindingOperationName="ReaccommodatePassenger" type="Request-Response" outputName="ReaccommodatePassengerResponse" inputName="ReaccommodatePassengerRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="7cf67878-3998-4a49-b5b2-7a3452fa08e1" isOneWay="false" action="" name="ReaccommodatePassengerWithoutNotification" bindingOperationName="ReaccommodatePassengerWithoutNotification" type="Request-Response" outputName="ReaccommodatePassengerWithoutNotificationResponse" inputName="ReaccommodatePassengerWithoutNotificationRequest" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:interface xsi:type="con:RestService" id="76ea234b-8015-4e79-87b1-085a3e495ca5" wadlVersion="http://wadl.dev.java.net/2009/02" name="TestDataGenerator" type="rest" definitionUrl="ath" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/></con:interface><con:interface xsi:type="con:WsdlInterface" id="d157bc5d-e396-4a72-aba8-0b07c857545f" wsaVersion="NONE" name="AmadeusWebServicesBinding" type="wsdl" bindingName="{http://xml.amadeus.com/CP2_PNR_1_PDT_1_0}AmadeusWebServicesBinding" soapVersion="1_1" anonymous="optional" definition="file:/C:/Users/n475111/Downloads/CP2_PNR_1_TST_1.0/CP2_PNR_1_TST_1.0_Technical.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/C:/Users/n475111/Downloads/CP2_PNR_1_TST_1.0/CP2_PNR_1_TST_1.0_Technical.wsdl"><con:part><con:url>file:/C:/Users/n475111/Downloads/CP2_PNR_1_TST_1.0/CP2_PNR_1_TST_1.0_Technical.wsdl</con:url><con:content><![CDATA[<!--Created with WSDLGenerator 2.0.0 by Amadeus SAS-->
<!--Amadeus Proprietary and Confidential Information: unauthorized use and disclosure strictly forbidden. 2015 - Amadeus s.a.s - All Rights Reserved.-->
<wsdl:definitions targetNamespace="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:awsse="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:int="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" xmlns:pnr_addmultielements_9_1="http://xml.amadeus.com/PNRADD_09_1_1A" xmlns:pnr_cancel_9_1="http://xml.amadeus.com/PNRXCL_09_1_1A" xmlns:pnr_ignore_4_1="http://xml.amadeus.com/CLTREQ_04_1_IA" xmlns:pnr_ignorereply_4_1="http://xml.amadeus.com/CLTRES_04_1_IA" xmlns:pnr_list_0_1="http://xml.amadeus.com/TNLRES_00_1_1A" xmlns:pnr_reply_9_1="http://xml.amadeus.com/PNRACC_09_1_1A" xmlns:pnr_retrieve_9_1="http://xml.amadeus.com/PNRRET_09_1_1A" xmlns:security_trustedusersignin_7_2="http://xml.amadeus.com/VLSTLQ_07_2_1A" xmlns:security_trustedusersigninreply_7_2="http://xml.amadeus.com/VLSTLR_07_2_1A" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:import namespace="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" location="CP2_PNR_1_TST_1.0_Functional.wsdl"/>
  <wsdl:types>
    <xs:schema>
      <xs:import schemaLocation="WBS_Session-2.0.xsd" namespace="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="Session_2.0">
    <wsdl:part name="session" element="awsse:Session"/>
  </wsdl:message>
  <wsdl:binding name="AmadeusWebServicesBinding" type="tns:CP2_PNR_1_PDT_1_0_ServicesPT">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="PNR_AddMultiElements">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/PNRADD_09_1_1A"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="PNR_Cancel">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/PNRXCL_09_1_1A"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="PNR_Ignore">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/CLTREQ_04_1_IA"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="PNR_Retrieve2">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/PNRRET_09_1_1A"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="PNR_Retrieve">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/PNRRET_09_1_1A"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="Security_TrustedUserSignIn">
      <soap:operation soapAction="http://webservices.amadeus.com/1ASIWCP2BA/VLSTLQ_07_2_1A"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
        <soap:header message="tns:Session_2.0" part="session" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="CP2_PNR_1_PDT_1_0_Services">
    <wsdl:port binding="tns:AmadeusWebServicesBinding" name="AmadeusWebServicesPort">
      <soap:address location="http://BAaccess.test.webservices.1a.amadeus.com/1ASIWCP2BA"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>
<!--1F8B080000000000000045CDB10AC2301485E1BD4F7147455A6E4B87F46EB1421695A005C712F40E81260D49147C7B830E8E67F8BFA3D87334D9AE1EB2759CB27181A0C376A8B1AF7180E9C9E961DE80827A4128409DA61D222156B7EBE108EA07AC115E1C53714ADD6083D5B858F6194C088BBD7F1F08E47FC0662FB785901ABC714C30EA6ED6E7CBDC7E00CB475F7593000000-->]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\CP2_PNR_1_TST_1.0_Functional.wsdl</con:url><con:content><![CDATA[<!--Created with WSDLGenerator 2.0.0 by Amadeus SAS-->
<!--Amadeus Proprietary and Confidential Information: unauthorized use and disclosure strictly forbidden. 2015 - Amadeus s.a.s - All Rights Reserved.-->
<wsdl:definitions targetNamespace="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:awsse="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr_addmultielements_9_1="http://xml.amadeus.com/PNRADD_09_1_1A" xmlns:pnr_cancel_9_1="http://xml.amadeus.com/PNRXCL_09_1_1A" xmlns:pnr_ignore_4_1="http://xml.amadeus.com/CLTREQ_04_1_IA" xmlns:pnr_ignorereply_4_1="http://xml.amadeus.com/CLTRES_04_1_IA" xmlns:pnr_list_0_1="http://xml.amadeus.com/TNLRES_00_1_1A" xmlns:pnr_reply_9_1="http://xml.amadeus.com/PNRACC_09_1_1A" xmlns:pnr_retrieve_9_1="http://xml.amadeus.com/PNRRET_09_1_1A" xmlns:security_trustedusersignin_7_2="http://xml.amadeus.com/VLSTLQ_07_2_1A" xmlns:security_trustedusersigninreply_7_2="http://xml.amadeus.com/VLSTLR_07_2_1A" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://xml.amadeus.com/CP2_PNR_1_PDT_1_0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xs:schema>
      <xs:import schemaLocation="PNR_AddMultiElements_09_1_1A.xsd" namespace="http://xml.amadeus.com/PNRADD_09_1_1A"/>
      <xs:import schemaLocation="PNR_Reply_09_1_1A.xsd" namespace="http://xml.amadeus.com/PNRACC_09_1_1A"/>
      <xs:import schemaLocation="PNR_Cancel_09_1_1A.xsd" namespace="http://xml.amadeus.com/PNRXCL_09_1_1A"/>
      <xs:import schemaLocation="PNR_Ignore_04_1_IA.xsd" namespace="http://xml.amadeus.com/CLTREQ_04_1_IA"/>
      <xs:import schemaLocation="PNR_IgnoreReply_04_1_IA.xsd" namespace="http://xml.amadeus.com/CLTRES_04_1_IA"/>
      <xs:import schemaLocation="PNR_Retrieve_09_1_1A.xsd" namespace="http://xml.amadeus.com/PNRRET_09_1_1A"/>
      <xs:import schemaLocation="PNR_List_00_1_1A.xsd" namespace="http://xml.amadeus.com/TNLRES_00_1_1A"/>
      <xs:import schemaLocation="Security_TrustedUserSignIn_07_2_1A.xsd" namespace="http://xml.amadeus.com/VLSTLQ_07_2_1A"/>
      <xs:import schemaLocation="Security_TrustedUserSignInReply_07_2_1A.xsd" namespace="http://xml.amadeus.com/VLSTLR_07_2_1A"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="PNR_AddMultiElements_9_1">
    <wsdl:part name="PNR_AddMultiElements_9_1" element="pnr_addmultielements_9_1:PNR_AddMultiElements"/>
  </wsdl:message>
  <wsdl:message name="PNR_Reply_9_1">
    <wsdl:part name="PNR_Reply_9_1" element="pnr_reply_9_1:PNR_Reply"/>
  </wsdl:message>
  <wsdl:message name="PNR_Cancel_9_1">
    <wsdl:part name="PNR_Cancel_9_1" element="pnr_cancel_9_1:PNR_Cancel"/>
  </wsdl:message>
  <wsdl:message name="PNR_Ignore_4_1">
    <wsdl:part name="PNR_Ignore_4_1" element="pnr_ignore_4_1:PNR_Ignore"/>
  </wsdl:message>
  <wsdl:message name="PNR_IgnoreReply_4_1">
    <wsdl:part name="PNR_IgnoreReply_4_1" element="pnr_ignorereply_4_1:PNR_IgnoreReply"/>
  </wsdl:message>
  <wsdl:message name="PNR_Retrieve_9_1">
    <wsdl:part name="PNR_Retrieve_9_1" element="pnr_retrieve_9_1:PNR_Retrieve"/>
  </wsdl:message>
  <wsdl:message name="PNR_List_0_1">
    <wsdl:part name="PNR_List_0_1" element="pnr_list_0_1:PNR_List"/>
  </wsdl:message>
  <wsdl:message name="Security_TrustedUserSignIn_7_2">
    <wsdl:part name="Security_TrustedUserSignIn_7_2" element="security_trustedusersignin_7_2:Security_TrustedUserSignIn"/>
  </wsdl:message>
  <wsdl:message name="Security_TrustedUserSignInReply_7_2">
    <wsdl:part name="Security_TrustedUserSignInReply_7_2" element="security_trustedusersigninreply_7_2:Security_TrustedUserSignInReply"/>
  </wsdl:message>
  <wsdl:portType name="CP2_PNR_1_PDT_1_0_ServicesPT">
    <wsdl:operation name="PNR_AddMultiElements">
      <wsdl:input message="tns:PNR_AddMultiElements_9_1"/>
      <wsdl:output message="tns:PNR_Reply_9_1"/>
    </wsdl:operation>
    <wsdl:operation name="PNR_Cancel">
      <wsdl:input message="tns:PNR_Cancel_9_1"/>
      <wsdl:output message="tns:PNR_Reply_9_1"/>
    </wsdl:operation>
    <wsdl:operation name="PNR_Ignore">
      <wsdl:input message="tns:PNR_Ignore_4_1"/>
      <wsdl:output message="tns:PNR_IgnoreReply_4_1"/>
    </wsdl:operation>
    <wsdl:operation name="PNR_Retrieve2">
      <wsdl:input message="tns:PNR_Retrieve_9_1"/>
      <wsdl:output message="tns:PNR_List_0_1"/>
    </wsdl:operation>
    <wsdl:operation name="PNR_Retrieve">
      <wsdl:input message="tns:PNR_Retrieve_9_1"/>
      <wsdl:output message="tns:PNR_Reply_9_1"/>
    </wsdl:operation>
    <wsdl:operation name="Security_TrustedUserSignIn">
      <wsdl:input message="tns:Security_TrustedUserSignIn_7_2"/>
      <wsdl:output message="tns:Security_TrustedUserSignInReply_7_2"/>
    </wsdl:operation>
  </wsdl:portType>
</wsdl:definitions>
<!--1F8B080000000000000045CDB10AC2301485E1BD4F7147455A6E4B87F46EB1421695A005C712F40E81260D49147C7B830E8E67F8BFA3D87334D9AE1EB2759CB27181A0C376A8B1AF7180E9C9E961DE80827A4128409DA61D222156B7EBE108EA07AC115E1C53714ADD6083D5B858F6194C088BBD7F1F08E47FC0662FB785901ABC714C30EA6ED6E7CBDC7E00CB475F7593000000-->]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_AddMultiElements_09_1_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/PNRADD_09_1_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/PNRADD_09_1_1A">
  <xs:element name="PNR_AddMultiElements">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="reservationInfo" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="reservation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="companyId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="controlNumber" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="19"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="pnrActions">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="optionCode" maxOccurs="40">
                <xs:simpleType>
                  <xs:restriction base="xs:decimal">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                    </xs:annotation>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="travellerInfo" minOccurs="0" maxOccurs="100">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="elementManagementPassenger">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reference" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="5"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="segmentName">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="passengerData" maxOccurs="2">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="travellerInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="traveller">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="surname">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..57</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="57"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="quantity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passenger" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..56</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="56"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="infantIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="identificationCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dateOfBirth" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="dateAndTimeDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="8"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="originDestinationDetails" minOccurs="0" maxOccurs="50">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="originDestination">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="origin" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="destination" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="itineraryInfo" minOccurs="0" maxOccurs="99">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="elementManagementItinerary">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="segmentName">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="airAuxItinerary" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="travelProduct">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="product" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="depDate">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="6"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="depTime" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="arrDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="6"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="arrTime" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="boardpointDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="cityCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="cityName" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="offpointDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="cityCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="cityName" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="company" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="identification">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="productDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="identification">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="classOfService" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="subtype" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="description" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="flightTypeDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="flightIndicator">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="processingIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="messageAction">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="business">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="function">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="relatedProduct" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="quantity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="selectionDetailsAir" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="selection" maxOccurs="10">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:sequence>
                                        <xs:element name="option">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="reservationInfoSell" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="reservation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="controlNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="19"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="freetextItinerary" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freetextDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="subjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="status" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="longFreetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..199</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="199"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="referenceForSegment" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0" maxOccurs="198">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="dataElementsMaster" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="marker1">
                <xs:complexType>
                  <xs:sequence/>
                </xs:complexType>
              </xs:element>
              <xs:element name="dataElementsIndiv" minOccurs="0" maxOccurs="250">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="elementManagementData">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="segmentName">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="pnrSecurity" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="security" minOccurs="0" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="14"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessMode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="securityInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="creationDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="agentCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="9"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="indicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="accounting" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="account" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="number" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="costNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..12</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="12"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="clientReference" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="accountNumberOfUnits" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="miscellaneousRemark" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="remarks" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="type">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="category" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..127</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="127"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="providerType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="currency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeId" minOccurs="0" maxOccurs="5">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="9"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="serviceRequest" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="ssr">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="quantity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="indicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="boardpoint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="offpoint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="ssrb" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="data" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatType" minOccurs="0" maxOccurs="3">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dateAndTimeInformation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="dateAndTime">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="movementType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationIdentification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="tourCode" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="formatedTour" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="productId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="year" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="approvalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="partyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="8"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="netRemit" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="indicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="14"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="freeFormatTour" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="indicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="14"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ticketElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="ticket">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="indicator">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="time" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..15</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="15"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="airlineCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queueNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queueCategory" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sitaAddress" minOccurs="0" maxOccurs="5">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an7</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="7"/>
                                      <xs:maxLength value="7"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="printOptions" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..127</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="127"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="freetextData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="freetextDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="subjectQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="longFreetext" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..199</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="199"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="structuredAddress" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="informationType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="address">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="optionA1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="optionTextA1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="optionalData" minOccurs="0" maxOccurs="8">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="option">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="optionText">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="optionElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="optionDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="officeId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="9"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queue" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="category" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="printer" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="identifierDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="name">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an5..6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="5"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="network" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="office" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="9"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="teletypeAddress" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an7</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="7"/>
                                <xs:maxLength value="7"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="seatGroup" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="seatRequest">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="seat" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="boardpoint" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="3"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="offpoint" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="3"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="special" minOccurs="0" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="data" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatType" minOccurs="0" maxOccurs="3">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="railSeatReferenceInformation" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="railSeatReferenceDetails" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="coachNumber" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="deckNumber" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="seatNumber" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="railSeatPreferences" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="seatRequestFunction" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="smokingIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="classDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="bookingClass" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="seatConfiguration" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="seatSpace" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="coachType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatEquipment" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatPosition" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatDirection" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatDeck" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="specialPassengerType" minOccurs="0" maxOccurs="2">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="fareElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="generalIndicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="officeId" minOccurs="0" maxOccurs="5">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="9"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="freetextLong" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..126</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="126"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="fareDiscount" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="discount" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="adjustmentReason" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="percentage" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="staffNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="7"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="staffName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a..30</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="30"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="birthDate" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="6"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="numberDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="units">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="unitsQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rpInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="referenceNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..12</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="customer" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cardType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cardNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..13</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cardCheck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="owner" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="version" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="residentDisc" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="idCardCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="idCardType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cardNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..13</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="alphaCheck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="zipCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="certificateNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="20"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="manualFareDocument" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="document" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ticketNumber">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="10"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ticketNumberCd" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjuction" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjuctionCD" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="freeflow" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..49</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="49"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="commission" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="indicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="commissionInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="percentage" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="vatIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="remitIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="oldCommission" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="percentage" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="vatIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="remitIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="manualCapping" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="originalIssue" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="voucherIndicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="issue" maxOccurs="3">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="airlineCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="documentNumber">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="documentCD" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="coupon1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="coupon2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="coupon3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="coupon4" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjunction" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="exchangeDocumentCD" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjunction1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjunction2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjunction3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="lastConjunction4" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="dateOfIssue">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="iataNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="currency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="baseFare" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="totalTax" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="penalty" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="freeflow" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..126</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="126"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="formOfPayment" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="fop" maxOccurs="3">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="creditCardCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accountNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="expiryDate" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="approvalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="8"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="customerAccountNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="paymentTimeReference" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="currencyCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="fopExtension" minOccurs="0" maxOccurs="3">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="fopSequenceNumber">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="newFopsDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cvData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="printedFreeflow" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="reportedFreeflow" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="onoData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..15</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="15"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="gwtData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..15</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="15"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="chdData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="delegationCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mcoDocNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..13</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="13"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mcoCouponNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mcoIataNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mcoPlaceOfIssue" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mcoDateOfIssue" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an7</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="7"/>
                                      <xs:maxLength value="7"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="iataNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="extFOP" minOccurs="0" maxOccurs="99">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="referenceQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="dataValue" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="serviceDetails" minOccurs="0" maxOccurs="3">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="statusDetails">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="indicator" minOccurs="0">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="frequentTravellerVerification" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="actionRequest">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="company" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="code">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="partnerCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="otherPartnerCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="account">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="numberQualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..27</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="27"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ticketingCarrier" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="carrier" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="airlineCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="optionInfo" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="printerNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="8"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="language" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="farePrintOverride" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="override" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="baseFare">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="11"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="totalFare" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="11"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="equivalentFare" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="11"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="taxAmount" minOccurs="0" maxOccurs="3">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="11"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="frequentTravellerData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="frequentTraveller">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="membershipNumber">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="25"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="accessLevel" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="securityDetails" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="typeOfEntity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessMode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="inhouseIdentification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="referenceForDataElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0" maxOccurs="198">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B080000000000000085904F6B023110C5EFF914DE4BDD58B0E0C21E16743DB92D6AE95162326A207FB6996CE9227EF74E76D7E2AD90C3CBCCE4BD5F66BDAA57DB72BF5A1EDEEAE285CFF8339FD3997C8272804A7413BEC8E7AFF98C4FD69BFD13E739E7CC090BD80809C535760DDC0ED76F08A8BD2315C080C054136770B2BB31E9AD0517B1380983C08C77E76450C4D00253BE3D1AD8C1574BC3F02EA2BC0C8D9336B06D0D14CE5724FB7BFFAC8F4CEA9F584244D24B88421B241B07540B6718397EACD993D3D0283765B2C5EA9EC2505EC08A4480B417BEC8F882A511B5EB1BA349E3B58B35C407F031B7C4DE7D18935E01421C298E045AFFADF01263936719E14C85150A5A9CD2C63216BC8F0F9F65684588497E382D75EC46EB81132B1F4AA3C918EF14F4D34A8351B8F321821AC77F0189F1CD5BF0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_Reply_09_1_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/PNRACC_09_1_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/PNRACC_09_1_1A">
  <xs:element name="PNR_Reply">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="pnrHeader" minOccurs="0" maxOccurs="198">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="reservationInfo">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reservation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="controlNumber" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="19"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="controlType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="date" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="6"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="time" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="4"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="referenceForRecordLocator" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reference" minOccurs="0" maxOccurs="198">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="securityInformation" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="responsibilityInformation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="typeOfPnrElement">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="2"/>
                          <xs:maxLength value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="agentId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an4</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="4"/>
                          <xs:maxLength value="4"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="officeId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="iataCode" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n8</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="8"/>
                          <xs:maxLength value="8"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="queueingInformation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="queueingOfficeId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..24</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="24"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="location" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="cityCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="3"/>
                    <xs:maxLength value="3"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="secondRpInformation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="creationOfficeId">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="agentSignature" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="6"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="creationDate">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="6"/>
                          <xs:maxLength value="6"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="creatorIataCode" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n8</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="8"/>
                          <xs:maxLength value="8"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="creationTime" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="4"/>
                          <xs:maxLength value="4"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="queueInformations" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="queueDetail" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="queueNum1" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="queueName" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="7"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="categoryDetail" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="categoryNum1" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="categoryName" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..16</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="16"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="dateRange" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="dateRangeNum" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="informations" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="indicator" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="queueType" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="numberOfUnits" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="numberDetail">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="number" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="qualifier" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="generalErrorInfo" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="messageErrorInformation">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="errorDetail">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="errorCode">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="5"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="responsibleAgency">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="messageErrorText">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="freetextDetail" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="subjectQualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="type" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="companyId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="language" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="text" minOccurs="0" maxOccurs="10">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="70"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="freetextData" minOccurs="0" maxOccurs="3">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="freetextDetail" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="subjectQualifier">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="type" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="4"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="status" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="companyId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="longFreetext" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..999</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="999"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="freeFormText" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="freetextDetail" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="subjectQualifier">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="type" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="4"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="companyId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="language" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="text" minOccurs="0" maxOccurs="10">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="70"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="historyData" minOccurs="0" maxOccurs="999">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="previousRecord" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:decimal">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                    </xs:annotation>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="currentRecord" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:decimal">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                    </xs:annotation>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="elementType" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: a..2</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="2"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="elementData">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..255</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="255"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="sbrPOSDetails">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sbrUserIdentificationOwn">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="originIdentification">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="originatorId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification1">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification2" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="originatorTypeCode" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrSystemDetails" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="deliveringSystem">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyId">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="locationId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrPreferences" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="userPreferences">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="codedCountry">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedCurrency" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedLanguage" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="sbrCreationPosDetails">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sbrUserIdentificationOwn">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="originIdentification">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="originatorId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification1">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification2" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="originatorTypeCode" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrSystemDetails" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="deliveringSystem">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyId">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="locationId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrPreferences" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="userPreferences">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="codedCountry">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedCurrency" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedLanguage" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="sbrUpdatorPosDetails">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sbrUserIdentificationOwn">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="originIdentification">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="originatorId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification1">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="inHouseIdentification2" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="originatorTypeCode" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrSystemDetails" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="deliveringSystem">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyId">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="locationId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="sbrPreferences" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="userPreferences">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="codedCountry">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedCurrency" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codedLanguage" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="technicalData" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="enveloppeNumberData">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="actionRequest" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="sequenceDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="10"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="lastTransmittedEnvelopeNumber" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="currentRecord" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="purgeDateData" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="dateTime">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="year">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="month">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="day">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="generalPNRInformation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="statusDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="indicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="isPNRModifDuringTrans" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="travellerInfo" minOccurs="0" maxOccurs="100">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="elementManagementPassenger">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="status" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="reference" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="5"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="segmentName" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="lineNumber" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="passengerData" minOccurs="0" maxOccurs="2">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="travellerInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="traveller" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="surname">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..57</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="57"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="quantity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="staffType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passenger" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..56</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="56"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="infantIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="identificationCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="groupCounters" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="quantityDetails" maxOccurs="3">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="numberOfUnit" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="unitQualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dateOfBirth" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="dateAndTimeDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="8"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="nameError" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="nameErrorInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="errorDetail">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="errorCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="responsibleAgency">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="nameErrorFreeText" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="freetextDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="subjectQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="language" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="text" minOccurs="0" maxOccurs="10">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="70"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="originDestinationDetails" minOccurs="0" maxOccurs="50">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="originDestination">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="origin" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="destination" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="itineraryInfo" minOccurs="0" maxOccurs="99">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="elementManagementItinerary">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="status" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="reference" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="segmentName" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="lineNumber" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="travelProduct" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="product" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="depDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="depTime" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="arrDate" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="arrTime" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="dayChangeIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="boardpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cityName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="17"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="offpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cityName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="17"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="companyDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="secondIdentification" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sourceCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="classOfService" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="subtype" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="description" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="typeDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="detail" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="processingIndicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="itineraryMessageAction" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="business">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="function">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="itineraryReservationInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reservation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="controlNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="19"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="controlType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="time" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="relatedProduct" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="quantity" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="status" maxOccurs="2">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: a..2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="flightDetail" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="productDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="equipment" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="numOfStops" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="weekDay" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="departureInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="departTerminal" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="arrivalStationInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="terminal" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="timeDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="checkinTime" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="facilities" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="entertainement" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="entertainementDescription" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="productQualifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="productExtensionCode" minOccurs="0" maxOccurs="26">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="selectionDetails" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="selection" maxOccurs="10">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="option">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="optionInformation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="itineraryfreeFormText" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="freetextDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="subjectQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="language" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="text" minOccurs="0" maxOccurs="10">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="70"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="itineraryFreetext" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="freetextDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="subjectQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="longFreetext" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..999</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="999"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="hotelProduct" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="property" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="providerName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="code" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="name" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="hotelRoom" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="occupancy" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="typeCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="negotiated" minOccurs="0" maxOccurs="8">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="rateCode" minOccurs="0">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="4"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="otherHotelInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="currencyCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="rateInformations" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="ratePrice" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="rateAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rateInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="ratePlan" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rateIndicator" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="rateChangeIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="generalOption" minOccurs="0" maxOccurs="199">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="optionDetail">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="type">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="4"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="updateIndicator" minOccurs="0">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="1"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="freetext" minOccurs="0" maxOccurs="10">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..255</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="255"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="country" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="destinationCountryCode" maxOccurs="198">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="itineraryMonetaryInformations" minOccurs="0" maxOccurs="20">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="information" minOccurs="0">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="qualifier">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="amount">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:decimal">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                        </xs:annotation>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="currencyCode">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="taxInformation" minOccurs="0" maxOccurs="3">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="taxDetails" minOccurs="0" maxOccurs="2">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="taxRate" minOccurs="0">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="17"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="currCode" minOccurs="0">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="taxType" minOccurs="0" maxOccurs="99">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="customerTransactionData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="pos">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="classification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="crs" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="pointOfSaleCountry" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="flight">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cabin">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="subclass" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="flightType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="overbooking" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="connection" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="codeShare" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="airline">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="flightNumber">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="inventory">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="0"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sellingClass">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="suffix" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cascadingIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="yieldGroup" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="yieldData">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="scheduleChange" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="oversale" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="oversaleNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="oversaleIndicator" minOccurs="0" maxOccurs="3">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="yieldDataGroup" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="yieldInformations">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="monetaryDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="typeQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherMonetaryDetails" minOccurs="0" maxOccurs="4">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="typeQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="classCombinaison" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="bookingClassDetails" minOccurs="0" maxOccurs="26">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="designator">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="availabilityStatus" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="ondyield">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="origin" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="destination" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="tripOnD" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="origin" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="destination" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dateTimeDetails" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="dateAndTime">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="movementType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationIdentification" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="lccTypicalData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="lccFareData">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="tariffInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fareBasisCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="fareBaseAmount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currencyCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="rateInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fareGroup" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="9"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="lccConnectionData" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="iDSection">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="iDSequenceNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="iDQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="insuranceInformation" minOccurs="0" maxOccurs="198">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="insuranceName">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="insuranceTravelerDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="passengerType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="travellerSurname" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..60</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="60"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="travellerGivenName" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a..60</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="60"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="travellerReferenceNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="passengerBirthdate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="travelerPerpaxDetails" minOccurs="0" maxOccurs="10">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="perpaxMask">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="perpaxMaskIndicator">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="insuranceMonetaryInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="information" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currencyCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="insurancePremiumInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="currency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="amount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="supplementaryInformation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sexCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="creditCardDetails" minOccurs="0" maxOccurs="5">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="creditCardCompany">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creditCardNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="expirationDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="totalPremiumCurrency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="totalPremium" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="futureCurrency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="futureAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fareType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="travelerName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="insuranceDocInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="documentInformation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="typeOfDocument">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="documentNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="countryOfIssue" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="datesOfValidity" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="issueDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="8"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="expirationDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="8"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="insuranceDetails" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="providerProductDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="countryCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="extraReference" minOccurs="0" maxOccurs="4">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="60"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="substiteName" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="paxDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="surname">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="otherPaxDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="givenName">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="extraPremium" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="monetaryDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="typeQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="18"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="otherMonetaryDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="typeQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="18"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productSection" minOccurs="0" maxOccurs="48">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="productCode">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="companyCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="countryCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="productDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="50"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="productFamilyCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="extensionIdentification" minOccurs="0" maxOccurs="7">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="50"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="productFamilyCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="tariffCodeDetails" minOccurs="0" maxOccurs="48">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="tariffCodeType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="informationLines" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="freeTextDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="textSubjectQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="language" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="source">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="encoding">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="freeText" maxOccurs="5">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..64</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="64"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="planCostInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="tariffInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amountType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="totalAmount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="chargeDetails" minOccurs="0" maxOccurs="9">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="description" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="planTypeDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="planType">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tripType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tourOperator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="countryInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="geographicalZone" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="countryCode" minOccurs="0" maxOccurs="198">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="travelValue" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="monetaryDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="typeQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="18"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherMonetaryDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="typeQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="18"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="contactDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="miscelaneous">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="remarkDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="freetext" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="phoneNumber" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="phoneOrEmailType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="telephoneNumber" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="internationalDialCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="localPrefixCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="areaCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="telephoneNumber">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="emailAddress" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..90</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="90"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="contactName" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="paxDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="surname">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherPaxDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="givenName">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="subscriberAddressSection" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="nameDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="nameInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="identifier" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="addressInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="addressDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="format">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="line1">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="50"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="line2" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="50"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="line4" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="8"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="city" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="zipCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="regionDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="locationDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="phoneNumber" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="phoneOrEmailType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="telephoneNumber" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="internationalDialCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="localPrefixCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="areaCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="telephoneNumber">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="25"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="emailAddress" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..90</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="90"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="coverageDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="policyDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fareDiscount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="coverageInfo" minOccurs="0" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="coverage">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="coverageIndicator" minOccurs="0" maxOccurs="5">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="0"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="coverageValues" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="monetaryDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="otherMonetaryDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="coveredPassenger" minOccurs="0" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="paxDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="surname">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherPaxDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="givenName">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="title" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="coverageDates" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="beginDateTime" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="endDateTime" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="subscriptionDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="dateTime" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="hour" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="minutes" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="seconds" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="agentReferenceDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="originator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="comissionAmount" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="commissionDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="rate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..8</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="dealNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..8</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="insuranceFopSection" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="formOfPaymentSection">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="formOfPayment" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="indicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="vendorCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="creditCardNumber" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="expiryDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="approvalCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="17"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="sourceOfApproval" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="authorisedAmount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="addressVerification" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="customerAccount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="extendedPayment" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="fopFreeText" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="membershipStatus" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="transactionInfo" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherFormOfPayment" minOccurs="0" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="indicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="vendorCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="creditCardNumber" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="expiryDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="approvalCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="17"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="sourceOfApproval" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="authorisedAmount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="addressVerification" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="customerAccount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="extendedPayment" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="fopFreeText" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="membershipStatus" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="transactionInfo" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="fopExtendedData" minOccurs="0" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="statusDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="indicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="description" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherStatusDetails" minOccurs="0" maxOccurs="98">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="indicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="description" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="confirmationNumber" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="reservation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="controlNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productKnowledge" minOccurs="0" maxOccurs="20">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="numberOfItemsDetails" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="actionQualifier" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="referenceQualifier" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passengerDetails" minOccurs="0" maxOccurs="198">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="passengerAssociation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="value">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="perPaxProdKnowledge" minOccurs="0" maxOccurs="9">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:sequence>
                                        <xs:element name="numberOfItemsDetails" minOccurs="0">
                                          <xs:complexType>
                                            <xs:sequence>
                                              <xs:element name="actionQualifier" minOccurs="0">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="3"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                              <xs:element name="referenceQualifier" minOccurs="0">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="3"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                            </xs:sequence>
                                          </xs:complexType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="dateOfBirthInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="dateTime" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="passengerFeatures" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="paxDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="surname" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="gender" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="otherPaxDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="givenName">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="insureeRemark" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="remarkDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="freetext" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="travelerDocInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="birthDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="documentDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="number">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="20"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="countryOfIssue" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="expiryDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="8"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="issueDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="8"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="policyDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fareDiscount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="travelerValueDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="travelCost">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="coverageIndicator" minOccurs="0" maxOccurs="5">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="0"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="travelAmount" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="monetaryDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="otherMonetaryDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="premiumPerTariffPerPax" minOccurs="0" maxOccurs="4">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tariffCodeInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffCodeDetails" minOccurs="0" maxOccurs="48">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="tariffCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="35"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="tariffCodeType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="35"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="tariffCodePerPaxAmount" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="monetaryDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="otherMonetaryDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="typeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="18"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="premiumPerpaxInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tariffInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amountType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="totalAmount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="chargeDetails" minOccurs="0" maxOccurs="9">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="description" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="voucherNumber" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="value">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..22</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="22"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="printInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="documentDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="number" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="status">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="date" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="hotelReservationInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="hotelPropertyInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="hotelReference">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="chainCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="cityCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="3"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hotelCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="3"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="hotelName">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fireSafetyIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="companyIdentification">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCodeContext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessLevel" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="requestedDates">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="businessSemantic" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="timeMode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="beginDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hour" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="minutes" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="endDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hour" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="minutes" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..6</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="roomRateDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="roomInformation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="roomRateIdentifier" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="roomType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="3"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="ratePlanCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="3"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="rateCategoryCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="rateQualifiedIndic" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="bookingCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="guestCountDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="numberOfUnit">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="unitQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="roomTypeOverride" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="children" minOccurs="0" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="age">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="referenceForPassenger" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="passengerReference">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="35"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="tariffDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tariffInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="rateType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="20"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="ratePlanIndicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amountType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="rateChangeIndicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="rateInformation" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="category" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="9"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="chargeDetails" minOccurs="0" maxOccurs="30">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..12</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="description" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="20"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="numberInParty" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currency" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="comment" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="rateCodeIndicator" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="ruleDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="quantity">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="quantityUnit">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="ruleStatusDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="statusType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="processIndicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="cancelOrConfirmNbr" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="reservation" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="companyId" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="controlNumber" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="19"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="controlType" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="1"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="date" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="6"/>
                                              <xs:maxLength value="6"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="time" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="4"/>
                                              <xs:maxLength value="4"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="roomstayIndex" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="itemNumberDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="number">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingSource">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="originIdentification">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="originatorId">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n5..8</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="billableInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="billingInfo" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="billingDetails">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="billingQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="customerInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="customerReferences" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="referenceNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="frequentTravellerInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="airlineFrequentTraveler">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="company">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="membershipNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..27</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="27"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tierLevel" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="priorityCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tierDescription" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="allianceFrequentTraveler" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tierLevel" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="priorityCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tierDescription" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="guaranteeOrDeposit" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="paymentInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="paymentDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="formOfPaymentCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="paymentType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="serviceToPay">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="referenceNumber" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..31</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="31"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="creditCardInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="formOfPayment" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="indicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="vendorCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="creditCardNumber" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="expiryDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="extendedPayment" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="fopFreeText" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="textOptions" minOccurs="0" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="remarkDetails" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="type">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="10"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="freetext" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..120</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="120"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="businessFunction" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="language" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="source" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="encoding" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="savingAmountInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="information" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currencyCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="writtenConfirmationContact" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="contactInformation" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="partyQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="comAddress">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..57</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="57"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="comChannelQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="writtenConfirmationInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="partyQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="addressDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="line1">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="line2" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="partyNameDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="name1">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="documentInformationDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="documentDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="number" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="10"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="status">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="arrivalFlightDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelProductInformation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="product" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="depDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="6"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="depTime" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="arrDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="6"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="arrTime">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="dayChangeIndicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="boardpointDetail" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="cityCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="cityName" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="17"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="offpointDetail" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="cityCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="cityName" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="17"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="companyDetail" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="identification">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="secondIdentification" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="sourceCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="productDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="identification">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="classOfService" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="subtype" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="description" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="typeDetail" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="detail" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="processingIndicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="additionalTransportDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="terminalInformation" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:sequence>
                                              <xs:element name="arrivalTerminal">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="2"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                            </xs:sequence>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="typicalCarData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="vehicleInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="vehicleCharacteristic">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="vehicleTypeOwner">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="vehicleRentalPrefType" maxOccurs="2">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="vehSpecialEquipment" minOccurs="0" maxOccurs="99">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="vehicleInfo" minOccurs="0" maxOccurs="6">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="value">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="unit" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeTextDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="informationType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="carModel" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..55</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="55"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="additionalInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="informationType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText" maxOccurs="24">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="voucherPrintAck" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="referenceDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="value" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="companyIdentification">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCodeContext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessLevel" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="locationInfo" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="locationType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationDescription">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="name" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="60"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="firstLocationDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="agency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="deliveryAndCollection" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="addressDeliveryCollection">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="addressUsageDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="purpose">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="addressDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="format">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="line1">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="60"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="city" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="zipCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="countryCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="regionDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="locationDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="30"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="phoneNumber">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="phoneOrEmailType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="telephoneNumberDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="telephoneNumber">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="20"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="pickupDropoffTimes">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="businessSemantic" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="timeMode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="beginDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hour" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="minutes" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="endDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hour" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="minutes" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="cancelOrConfirmNbr" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="reservation" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="companyId" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="controlNumber" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="19"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="controlType" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="1"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="date" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="6"/>
                                              <xs:maxLength value="6"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="time" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="4"/>
                                              <xs:maxLength value="4"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rateCodeGroup" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="rateCodeInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fareCategories">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="fareType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="additionalInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="freeTextDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="textSubjectQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="informationType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyId" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="language" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="source">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="encoding">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="freeText" maxOccurs="24">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="fFlyerNbr" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="airlineFrequentTraveler">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="company">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="membershipNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..28</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="28"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="customerInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="customerReferences" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="referenceNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rateInfo" minOccurs="0" maxOccurs="10">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="tariffInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="rateType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="ratePlanIndicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amountType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="rateChangeIndicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="rateInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="category">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="chargeDetails" minOccurs="0" maxOccurs="30">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="description" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="numberInParty" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="periodType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="comment" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="errorWarning" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="applicationError">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="errorDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="errorCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="errorCategory" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="errorCodeOwner" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="errorFreeText" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="freeTextDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="textSubjectQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="informationType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyId" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="language" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="source">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="encoding">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="freeText" maxOccurs="24">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rulesPoliciesGroup" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="dummy1">
                                  <xs:complexType>
                                    <xs:sequence/>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="sourceLevel" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="selectionDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="option">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="remarks" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="freeTextDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="textSubjectQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="informationType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyId" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="language" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="source">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="encoding">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="freeText" maxOccurs="24">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="taxCovSurchargeGroup" minOccurs="0" maxOccurs="98">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="taxSurchargeCoverageInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffInfo" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rateChangeIndicator">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="chargeDetails" maxOccurs="16">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="description" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="numberInParty" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="periodType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="comment" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="70"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="additionalInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="freeTextDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="textSubjectQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="informationType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="companyId" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="language" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="source">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="encoding">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="freeText" maxOccurs="24">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="surchargePeriods" minOccurs="0" maxOccurs="10">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="period">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rangeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="rangeDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="dataType">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="min">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="max">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="surchargePeriodTariff">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="tariffInfo" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="rateChangeIndicator">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="chargeDetails" maxOccurs="4">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="type">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="amount" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="description" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="numberInParty" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="periodType" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="currency" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="comment" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="70"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="maximumUnitQualifier" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="measurementQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="valueRange">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="measureUnitQualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="otherRulesGroup" minOccurs="0" maxOccurs="13">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="otherRules">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="ruleDetails" maxOccurs="5">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="quantity" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="quantityUnit" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="daysOfOperation" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..35</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="ruleText" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="textType">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="freeText" maxOccurs="20">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..55</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="55"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="dateTimeInfo" minOccurs="0" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="businessSemantic" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="timeMode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="beginDateTime">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="year" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="4"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="month" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="day" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="hour" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="minutes" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="endDateTime">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="year" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="4"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="month" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="day" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="hour" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="minutes" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="pickupDropoffLocation" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="locationInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="locationType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="locationDescription" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="name" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="11"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="address" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="addressDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="format">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="line1">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="70"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="line2" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="70"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="city" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="zipCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="17"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="countryCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="regionDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="9"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="openingHours" minOccurs="0" maxOccurs="10">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="businessSemantic" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="timeMode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="beginDateTime">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="hour">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="minutes">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="endDateTime">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="hour">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="minutes">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="frequency">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="1"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="phone" minOccurs="0" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="phoneOrEmailType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="emailAddress">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="specialEquipmentDetails" minOccurs="0" maxOccurs="5">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="dummy2">
                                        <xs:complexType>
                                          <xs:sequence/>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="rangePeriod" minOccurs="0" maxOccurs="5">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="agePeriod">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rangeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="rangeDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="dataType">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="min">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="max">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="maximumUnitQualifier" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="measurementQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="valueRange">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="measureUnitQualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="additionalInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="freeTextDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="textSubjectQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="informationType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="companyId" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="language" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="source">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="encoding">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="freeText" maxOccurs="2">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="specialEquipmentTariff" maxOccurs="6">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffInfo" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rateChangeIndicator">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="chargeDetails" maxOccurs="16">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="description" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="numberInParty" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="periodType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currency" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="comment" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="70"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="payment" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="formOfPayment" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="vendorCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creditCardNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="expiryDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="extendedPayment" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="fopFreeText" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="billingData" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="billingInfo" maxOccurs="3">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="billingDetails">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="billingQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingSource" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="originatorDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="originatorId">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n8</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="8"/>
                                            <xs:maxLength value="8"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="inclusiveTour" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="tourInformationDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tourCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="marketingInfo" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freetextDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="subjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="text" minOccurs="0" maxOccurs="10">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="supleInfo" minOccurs="0" maxOccurs="6">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="remarkDetails" minOccurs="0">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="type">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="10"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="freetext" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..90</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="90"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="businessFunction" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="language" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="source" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="encoding" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="estimatedDistance" minOccurs="0" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="quantityDetails">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="qualifier">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="value">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:decimal">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n..15</xs:documentation>
                                              </xs:annotation>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="unit">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="agentInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="nameInformation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="name">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..12</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="12"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="trackingOpt" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="agreementDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="description">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="25"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="electronicVoucherNumber" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="documentDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="number">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="customerEmail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="contact">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="email">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="contactQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="attribute">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="criteriaSetType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="criteriaDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="attributeType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="attributeDescription" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="typicalCruiseData" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="sailingShipInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="shipDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="name" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="cruiseLineCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="sailingProviderInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCodeContext">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyName">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="sailingPortsInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstLocationDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="secondLocationDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="sailingDateInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="beginDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="endDateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passengerInfo" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="paxDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="surname">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="otherPaxDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="givenName" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="30"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="title" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cruiseBookingReferenceInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="reservation" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="controlNumber">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="19"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="controlType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="bookingCompany" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="travelSector" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyCodeContext" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyName" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingDate">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="dateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="sailingGroupInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="referenceType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="uniqueReference">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="railInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyNumericCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n2..4</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="updatePermission" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="statusDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="indicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="tripDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="trainProductInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="trainDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="number" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="tripDateTime" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="businessSemantic" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="dateTime">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="hour" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="minutes" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="depLocation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="locationType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="locationDescription">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="60"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="firstLocationDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="arrLocation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="locationType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="locationDescription">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="60"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="firstLocationDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="railLeg" minOccurs="0" maxOccurs="6">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="trainProductInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="railCompany">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="trainDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="number" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="6"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="type">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="reservableStatus" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="accoStatus">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="statusCode">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="legDateTime" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="businessSemantic" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="dateTime">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="year">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="4"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="month">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="day">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="hour" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="minutes" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="depLocation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="locationType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="locationDescription">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="5"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="name" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="60"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="firstLocationDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="arrLocation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="locationType">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="2"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="locationDescription">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="5"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="name" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..60</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="60"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="firstLocationDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="legReference">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="itemNumberDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="number">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="openSegment" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="statusDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="indicator">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="journeyDirection" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="movementType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="providerTattoo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="referenceType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="uniqueReference">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="serviceInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText" maxOccurs="5">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..63</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="63"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="classInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="classDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="bookingClass" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="numberOfSeats">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="accommodationInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="accommAllocation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceId">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="coachInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="coachDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="value">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="equipmentCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="reservableStatus" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="accoStatus">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="statusCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="markerRailTour">
                      <xs:complexType>
                        <xs:sequence/>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="tourInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="bookingSummaryInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="dateTimeInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="departureDate">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="7"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="departureTime" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="arrivalDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="7"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="arrivalTime" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="locationInformation" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="name" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="country" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="companyInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="providerName">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="20"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="productDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="32"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="subType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="description" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="32"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingDurationInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="quantityDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="value">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="unit">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="stayingInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="locationType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationDescription">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="name" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="firstLocationDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="tourDescriptionInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="productArea">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="productDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="productCategory">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="productCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="14"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="addOnIndicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="productDescription" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..188</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="188"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingReferenceInfo" maxOccurs="2">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="reservationControlId">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="tourOperatorCode" minOccurs="0">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="4"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="reservationControlNumberQual">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="reservationControlNumber">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="32"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="statusInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="quantityActionDetails" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="quantity" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="statusCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="insuranceIndication" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="coverageIndicator">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passengerInfo" minOccurs="0" maxOccurs="99">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="paxDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="surname">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="40"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="otherPaxDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="givenName">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="40"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="title" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="expireInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="businessSemantic">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="dateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingDescriptionInfo" minOccurs="0" maxOccurs="4">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="informationType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="systemProviderInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyIdentification">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="operatingCompany">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="tourOperatorInfo" maxOccurs="10">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="32"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingSource" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="originIdentification" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="inHouseIdentification1" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="9"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="inHouseIdentification2" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="9"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="originator">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="11"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passengerAssocation" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="referenceDetails">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="type">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="value">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="2"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="tourAccountDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="tourTotalPrices" maxOccurs="20">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="tariffInformation" maxOccurs="3">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="rateIdentifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="7"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="unitaryAmount">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..30</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currencyCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="tariffQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="totalAmount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..20</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="quantity" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="tariffStatus" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="associatedChargesInformation" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="chargeUnitCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="amount">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="percentage">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="remainingAmountsDetails" minOccurs="0" maxOccurs="10">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="providerCode">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="travelSector">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyName" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="32"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="remainingAmount">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffInformation" maxOccurs="3">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rateIdentifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="unitaryAmount">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..30</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="tariffQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="totalAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..20</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="quantity" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="tariffStatus" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="associatedChargesInformation" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="chargeUnitCode">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="percentage">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="tourDetailedPriceInfo" minOccurs="0" maxOccurs="101">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="markerSpecificRead">
                                        <xs:complexType>
                                          <xs:sequence/>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="productId" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="referenceDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="productPrice">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tariffInformation" maxOccurs="3">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rateIdentifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="unitaryAmount">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..30</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="tariffQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="totalAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..20</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="quantity" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="tariffStatus" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="associatedChargesInformation" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="chargeUnitCode">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="percentage">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..10</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="paymentInformation" minOccurs="0" maxOccurs="10">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="payment">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="paymentDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="methodCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="purposeCode">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="amount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..11</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="date" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="11"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="creditCardInformation" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="name">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="cardNumber">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..20</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="expireDate">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="6"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="operatorCode" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="travelSector">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyName" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="32"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="tourProductDetails" maxOccurs="99">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="sequenceNumberInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="itemIdentification">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="itemID">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="itemIDQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="statusQuantityInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="quantityActionDetails" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantity" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="statusCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="productInfo">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="productArea">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="productDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="productCategory">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="productCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="14"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="addOnIndicator" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="productDescription" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..188</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="188"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="confirmationInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="reservationControlId">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="tourOperatorCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="reservationControlNumberQual">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="reservationControlNumber">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="32"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="passengerAssociation" minOccurs="0" maxOccurs="9">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:sequence>
                                        <xs:element name="referenceDetails">
                                          <xs:complexType>
                                            <xs:sequence>
                                              <xs:element name="type">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="3"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                              <xs:element name="value">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="2"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                            </xs:sequence>
                                          </xs:complexType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="serviceDetails" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="serviceInfo">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="dateTimeInformation" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="departureDate">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="departureTime" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="4"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="arrivalDate" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="arrivalTime" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="4"/>
                                                        <xs:maxLength value="4"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="locationInformation" minOccurs="0" maxOccurs="2">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="name" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="70"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="country" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="2"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="companyInformation" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="providerName">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="20"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="productDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="code" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="32"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="subType" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="description" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..32</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="32"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="serviceDurationInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="qualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="unit">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="accomodationDetails" minOccurs="0" maxOccurs="99">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="roomInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="roomRateIdentifier">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="roomType">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="bookingCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="35"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="guestCountDetails" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="numberOfUnit">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="unitQualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="roomTypeOverride" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..16</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="16"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="passengerAssociation" minOccurs="0" maxOccurs="9">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:sequence>
                                                    <xs:element name="referenceDetails">
                                                      <xs:complexType>
                                                        <xs:sequence>
                                                          <xs:element name="type">
                                                            <xs:simpleType>
                                                              <xs:restriction base="xs:string">
                                                                <xs:annotation>
                                                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                                </xs:annotation>
                                                                <xs:minLength value="1"/>
                                                                <xs:maxLength value="3"/>
                                                              </xs:restriction>
                                                            </xs:simpleType>
                                                          </xs:element>
                                                          <xs:element name="value">
                                                            <xs:simpleType>
                                                              <xs:restriction base="xs:string">
                                                                <xs:annotation>
                                                                  <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                                </xs:annotation>
                                                                <xs:minLength value="1"/>
                                                                <xs:maxLength value="2"/>
                                                              </xs:restriction>
                                                            </xs:simpleType>
                                                          </xs:element>
                                                        </xs:sequence>
                                                      </xs:complexType>
                                                    </xs:element>
                                                  </xs:sequence>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="roomMealPlanInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="diningIdentification">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="diningDescription">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..16</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="16"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="occupancynInfo" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="rangeQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="rangeDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="dataType">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="minOccupancy" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="maxOccupancy">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="vehiculeDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="vehiculeInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="vehiculeDescription">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="occupancy">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="transportationDetails" minOccurs="0" maxOccurs="99">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="departureInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="locationType">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="locationDescription">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="code">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="qualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="name" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="70"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="firstLocationDetails" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="code">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="2"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="qualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="arrivalInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="locationType">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="locationDescription">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="code">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="qualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="name" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="70"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="firstLocationDetails" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="code">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="2"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="qualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="transportationInfo">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="flightDate">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="departureDate">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="7"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="departureTime">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="arrivalDate" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="7"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="arrivalTime">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="companyDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="marketingCompany">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..24</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="24"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="flightIdentification">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="flightNumber">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="20"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="bookingClass">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="4"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="flightTypeDetails" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="flightIndicator">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="6"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="transportationDuration" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="quantityDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="qualifier">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="value">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:decimal">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                                              </xs:annotation>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="unit">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="3"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="equipmentInfo" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="sizeTypeDetails">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="description">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="35"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="transportationMealPlanInfo" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="diningIdentification">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="diningDescription">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..16</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="16"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="productBCSDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="agentIdentification">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="originIdentification" minOccurs="0">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="inHouseIdentification1" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="9"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                        <xs:element name="inHouseIdentification2" minOccurs="0">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="9"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                  <xs:element name="originator">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="11"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="distributionChannelData">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="cascadingSystem">
                                                    <xs:complexType>
                                                      <xs:sequence>
                                                        <xs:element name="companyId">
                                                          <xs:simpleType>
                                                            <xs:restriction base="xs:string">
                                                              <xs:annotation>
                                                                <xs:documentation xml:lang="en">Format limitations: an..12</xs:documentation>
                                                              </xs:annotation>
                                                              <xs:minLength value="1"/>
                                                              <xs:maxLength value="12"/>
                                                            </xs:restriction>
                                                          </xs:simpleType>
                                                        </xs:element>
                                                      </xs:sequence>
                                                    </xs:complexType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ferryLegInformation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="ferryProviderInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="35"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="itineraryInfoGroup">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="sailingDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="itineraryDateTimeInfo" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="departureDate">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="8"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="departureTime" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="arrivalDate" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..8</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="8"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="arrivalTime" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="boardPortDetails" maxOccurs="2">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="5"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="70"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="qualifier" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="lineNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="shipDescription" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="shipDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="name" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="sailingLegCheckInInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="dateTime">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="hour">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="minutes">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="passengerAssociation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="referenceDetails" maxOccurs="9">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="type" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="value">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="priceInfoGroup" minOccurs="0" maxOccurs="9">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="routePriceInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="priceDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="priceAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="priceQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="passengerCategoryType">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="attributeFunction">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="attributeDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="attributeType">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="numberOfPassengers">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="numberOfUnit">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="vehicleInfoGroup" minOccurs="0" maxOccurs="5">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="vehicleInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="category">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="vehicleDetails" minOccurs="0">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="makeAndModel" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="17"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="numberOfBicycles" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="numberOfUnit">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="vehicleRoutePrice" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="priceDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="priceAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="priceQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="serviceInfoGroup" minOccurs="0" maxOccurs="18">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="serviceInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="attributeFunction">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="1"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="attributeDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="attributeType">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..7</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="7"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="numberOfServices" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="numberOfUnit">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="serviceRoutePrice" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="priceDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="priceAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="priceQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="animalInfoGroup" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="animalInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="dataTypeInformation">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="type">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                            <xs:element name="dataInformation">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="indicator">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="value" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="animalRoutePrice" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="priceDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="priceAmount" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="currencyCode" minOccurs="0">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                  <xs:element name="priceQualifier">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:string">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                        </xs:annotation>
                                                        <xs:minLength value="1"/>
                                                        <xs:maxLength value="3"/>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="accomodationPackageInfoGroup" minOccurs="0" maxOccurs="4">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="packageCode">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="bookingClassDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="designator">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="hotelInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="hotelReference">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="hotelCode">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="hotelCheckInInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="dateTime">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="year">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="4"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="month">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="day">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="areaCodeInfo" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="locationType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="firstLocationDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="code">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="numberOfNights" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="quantityDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="numberOfUnit">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="hotelItemPrice" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="priceDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="priceAmount" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="currencyCode" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="priceQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="roomInfoGroup" minOccurs="0" maxOccurs="9">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="roomDetailsInformation">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="roomTypeOverride">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="numberOfRooms" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="quantityDetails">
                                              <xs:complexType>
                                                <xs:sequence>
                                                  <xs:element name="numberOfUnit">
                                                    <xs:simpleType>
                                                      <xs:restriction base="xs:decimal">
                                                        <xs:annotation>
                                                          <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                                        </xs:annotation>
                                                      </xs:restriction>
                                                    </xs:simpleType>
                                                  </xs:element>
                                                </xs:sequence>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingNumberInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="reservation">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="controlNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="errorInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="errorInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="errorDetail">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="errorCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="responsibleAgency">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="errorfreeFormText" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freetextDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="subjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="text" minOccurs="0" maxOccurs="10">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="referenceForSegment" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0" maxOccurs="198">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="segmentGroupingInfo" minOccurs="0" maxOccurs="50">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="groupingCode">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="3"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="marriageDetail" minOccurs="0" maxOccurs="99">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="marriageQualifier" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="tatooNum">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="dataElementsMaster" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="marker2">
                <xs:complexType>
                  <xs:sequence/>
                </xs:complexType>
              </xs:element>
              <xs:element name="dataElementsIndiv" minOccurs="0" maxOccurs="999">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="elementManagementData">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="status" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="reference" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="segmentName" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="lineNumber" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="pnrSecurity" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="security" minOccurs="0" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="14"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessMode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="securityInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="creationDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="agentCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="9"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="indicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="accounting" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="account" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="number" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="costNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..12</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="12"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="clientReference" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="gSTTaxDetails" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..109</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="109"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="accountNumberOfUnits" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="miscellaneousRemarks" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="remarks" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="type">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="category" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..127</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="127"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="providerType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="individualSecurity" minOccurs="0" maxOccurs="5">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="office">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessMode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeIdentifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="serviceRequest" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="ssr">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="quantity" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="indicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="processingIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="boardpoint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="offpoint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freeText" minOccurs="0" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="ssrb" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="data" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="crossRef" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatType" minOccurs="0" maxOccurs="3">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="seatPaxInfo" minOccurs="0" maxOccurs="9">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="seatPaxDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="genericDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="seatCharacteristic" minOccurs="0" maxOccurs="5">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="seatPaxIndicator" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="statusDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="indicator">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="crossRef">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="reference" minOccurs="0" maxOccurs="198">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="number">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="railSeatPreferences" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="seatRequestFunction" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="smokingIndicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="classDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="code" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="bookingClass" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="seatConfiguration" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="seatSpace" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="coachType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatEquipment" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatPosition" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatDirection" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="seatDeck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="specialPassengerType" minOccurs="0" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="sleeperDescription" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="berthDeck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cabinPosition" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cabinShareType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="cabinOccupancy" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="cityPair" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="depLocation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="locationType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationDescription">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="firstLocationDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="arrLocation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="locationType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationDescription">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="firstLocationDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="code">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="railSeatDetails" minOccurs="0" maxOccurs="9">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="railSeatReferenceInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="railSeatReferenceDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="coachNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="deckNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seatNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="railSeatDenomination" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dateAndTimeInformation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="dateAndTime">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="movementType" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="locationIdentification" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="frequentFlyerInformationGroup" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="frequentTravellerInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="frequentTraveler">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="company">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="membershipNumber">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..27</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="27"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="customerValue" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="priorityDetails" minOccurs="0" maxOccurs="2">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="priorityCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tierLevel" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="tierDescription" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="70"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="redemptionInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="category" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="sequenceNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="versionNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..11</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="11"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="rateClass" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="approvalCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="14"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="discountInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="discountDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="discountCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="bookingClassInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="bookingClassDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="designator">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ticketElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="passengerType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="ticket">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="indicator">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="2"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="time" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..15</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="15"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="transactionFlag" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="electronicTicketFlag" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="airlineCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queueNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queueCategory" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sitaAddress" minOccurs="0" maxOccurs="5">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an7</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="7"/>
                                      <xs:maxLength value="7"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="printOptions" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..127</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="127"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="referencedRecord" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="referencedReservationInfo">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="reservation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="controlNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..19</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="19"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="controlType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="date" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="6"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="time" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="securityInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="responsibilityInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="typeOfPnrElement">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="2"/>
                                            <xs:maxLength value="2"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="agentId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="officeId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="9"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="iataCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="queueingInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="queueingOfficeId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..24</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="24"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="location" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="3"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="cityCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="secondRpInformation" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="creationOfficeId">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="9"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="agentSignature" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creationDate">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="6"/>
                                            <xs:maxLength value="6"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creatorIataCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..9</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creationTime" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="optionElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="optionElementInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="mainOffice">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="date" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="queue" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="category" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freetext" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..61</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="61"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="time" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="individualSecurity" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="office">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="accessMode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="officeIdentifier" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="otherDataFreetext" minOccurs="0" maxOccurs="2">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="freetextDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="subjectQualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="type" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="status" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyId" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="longFreetext" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..999</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="999"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="structuredAddress" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="informationType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="address" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="option">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="optionText">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="monetaryInformation" minOccurs="0" maxOccurs="2">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="information" minOccurs="0">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="qualifier">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="amount">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:decimal">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                        </xs:annotation>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                  <xs:element name="currencyCode">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="elementErrorInformation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="errorInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="errorDetail">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="errorCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="5"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="qualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="responsibleAgency">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="elementErrorText" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freetextDetail" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="subjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="type" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="text" minOccurs="0" maxOccurs="10">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="mcoRecord" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="mcoType">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="type">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="2"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="mcoInformation">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="informationType" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="status" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="companyId" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="language" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..500</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="500"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="groupOfFareElements" minOccurs="0" maxOccurs="20">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="sequenceNumber">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="actionRequest" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="sequenceDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="number">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="10"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="fareElementData">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="freeTextDetails">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="textSubjectQualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="informationType" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="4"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="status" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="companyId" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="language" minOccurs="0">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="source">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="encoding">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="freeText">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..500</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="500"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="newFop" minOccurs="0" maxOccurs="3">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="fopDescription">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="formOfPayment">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="vendorCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="creditCardNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="expiryDate" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="approvalCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="17"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="sourceOfApproval" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="customerAccount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="extendedPayment" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="freeFlowFops" minOccurs="0" maxOccurs="4">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="freeTextDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="textSubjectQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="informationType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="source">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="encoding">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="freeText">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..199</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="199"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="fopOtherDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="fopDetails" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="fopCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="fopFacSimileCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="fopBillingCode" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="saleIndicator" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="dealNumber" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="collectingAgencyIataNum" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n8..9</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="fopAttributeData" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="onoData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="gwtData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="40"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccHolderName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..80</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="80"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="fopIndicators" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="fopCanBeReplaced" minOccurs="0" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fopCanReplace" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="nonRefundableFop" minOccurs="0" maxOccurs="2">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="nonRefundableFopAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="roundingFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="roundingFop2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fopHasAgt" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fopForTodAtCounter" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fopForTodAtQuickMachine" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="autoApprovalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="manualApprovalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="bypassCreditCardAproval" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="extendedPayment" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="nonCombinableFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="foCheck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="netRemitValidation1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mandatoryAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="airplusDescriptiveBilling" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="netRemitValidation2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="netRemitValidation3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="fopAllowedForNego" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="psaCoveredByFd" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="customerApplicationFop1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="mandatoryFt" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="customerApplicationFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="tstIndicator" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="orderNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freeflowTextInFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="bypassCreditCardValidation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="customerFileRefDataForBsp" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="freeFlowCardHolderText" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="printAndReportCreditCardPrefix" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="printAmountInAllCases" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="customerFileRefDataForPrinting" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="restrictAgtAndMsFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccSecurityVerificationCode1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccSecurityVerificationCode2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="telephoneSaleOrSwipe" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="checkTstNfElementAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="reportFreeflowInhibitPrint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baCreditAcountValidation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baBacchusDealValidation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baBudgetAcountValidation1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baBudgetAcountValidation2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="abBillingElementPresenceCheck" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="iataNumberWithCheckDigit" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baTempCreditAccount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baReporAndPrinttFreeflowFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baReportFreeflowFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="baIataNumBlacklistValidation" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="varigFopRnVn" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="varigFopRaRc" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="varigFopCreditCardPrefixCheck1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="varigFopCreditCardPrefixCheck2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="directLinkCrediCard" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfNonAuthorisedFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfMcoFop1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfMcoFop2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfMcoFop3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfMcoFop4" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="qfMcoFop5" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="supressCCAuthForPtaEot" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="internetCreditCard" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="creditCardVerificationCode1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="creditCardVerificationCode2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="creditCardVerificationCode3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="attributeRecordFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsAtoCtoFopForReportPrint1" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsAtoCtoFopForReportPrint2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsAtoCtoFopForReportPrint3" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsAtoCtoFopForReportPrint4" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsAtoCtoFopForReportPrint5" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="sataFop" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="activateAuditCouponPrint" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="illegibleCCV2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="missingCCV2" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="reportFpac" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ctsCCApprovalVerification" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccSecurityIdResultCodes" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="debitCardPresent" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="autoGenOrReplicationOfCCData" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccAutoAprovalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ccManualAprovalCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="insBankAccountNumber" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="insBankCode" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="insBankAccountHolderName" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="standardCreditCard" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="explicitCurrency" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="nilAmount" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="monetaryInfo" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="monetaryDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="typeQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="amount" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="35"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currency" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="totalPrice" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="providerCode">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="travelSector">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="companyCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="externalRef" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="referenceDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="type">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="value">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="10"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="methodOfDelivery" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="elementManagement">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="reference">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="qualifier">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="3"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="number">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:decimal">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                                                  </xs:annotation>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="deliveryDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="packageType">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="1"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="packageDetails" minOccurs="0">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="packageDesc">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..40</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="40"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="mainPrice">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="priceDetails">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="priceAmount">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="currencyCode">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="priceQualifier">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="1"/>
                                            <xs:maxLength value="3"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="otherPrices" minOccurs="0" maxOccurs="12">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="priceDetails">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="priceAmount">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:decimal">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                              </xs:annotation>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="priceQualifier">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productDescription" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="product">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="productData">
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="number">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="6"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                            <xs:element name="name">
                                              <xs:simpleType>
                                                <xs:restriction base="xs:string">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                                  </xs:annotation>
                                                  <xs:minLength value="1"/>
                                                  <xs:maxLength value="35"/>
                                                </xs:restriction>
                                              </xs:simpleType>
                                            </xs:element>
                                          </xs:sequence>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="productRestriction" minOccurs="0" maxOccurs="10">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:sequence>
                                        <xs:element name="restrictionDetails">
                                          <xs:complexType>
                                            <xs:sequence>
                                              <xs:element name="code" minOccurs="0">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="5"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                              <xs:element name="type">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="3"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                              <xs:element name="description" minOccurs="0">
                                                <xs:simpleType>
                                                  <xs:restriction base="xs:string">
                                                    <xs:annotation>
                                                      <xs:documentation xml:lang="en">Format limitations: an..16</xs:documentation>
                                                    </xs:annotation>
                                                    <xs:minLength value="1"/>
                                                    <xs:maxLength value="16"/>
                                                  </xs:restriction>
                                                </xs:simpleType>
                                              </xs:element>
                                            </xs:sequence>
                                          </xs:complexType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="additionnalChargeInformation" minOccurs="0" maxOccurs="4">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="additionnalCharge">
                                    <xs:complexType>
                                      <xs:sequence>
                                        <xs:element name="qualifier">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:string">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                              </xs:annotation>
                                              <xs:minLength value="1"/>
                                              <xs:maxLength value="3"/>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                        <xs:element name="amount">
                                          <xs:simpleType>
                                            <xs:restriction base="xs:decimal">
                                              <xs:annotation>
                                                <xs:documentation xml:lang="en">Format limitations: n..18</xs:documentation>
                                              </xs:annotation>
                                            </xs:restriction>
                                          </xs:simpleType>
                                        </xs:element>
                                      </xs:sequence>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="rateCodeInformation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="rateCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..15</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="15"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="optionalBooking" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="businessSemantic">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="dateTime">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="year">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:string">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                            </xs:annotation>
                                            <xs:minLength value="4"/>
                                            <xs:maxLength value="4"/>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="month">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="day">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="hour" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="minutes" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                      <xs:element name="seconds" minOccurs="0">
                                        <xs:simpleType>
                                          <xs:restriction base="xs:decimal">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Format limitations: n..2</xs:documentation>
                                            </xs:annotation>
                                          </xs:restriction>
                                        </xs:simpleType>
                                      </xs:element>
                                    </xs:sequence>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="elementsIndicators" minOccurs="0" maxOccurs="5">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:sequence>
                            <xs:element name="statusDetails">
                              <xs:complexType>
                                <xs:sequence>
                                  <xs:element name="indicator">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="3"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="referenceForDataElement" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reference" minOccurs="0" maxOccurs="198">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="qualifier">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="number">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="9"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="tstData" minOccurs="0" maxOccurs="100">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="tstGeneralInformation">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="generalInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="tstReferenceNumber">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="tstCreationDate">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="6"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="salesIndicator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="tstFreetext" minOccurs="0" maxOccurs="2">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="freetextDetail" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="subjectQualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="type" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="status" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="companyId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="longFreetext" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..999</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="999"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="fareBasisInfo" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="fareElement" maxOccurs="28">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="primaryCode">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="connection" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="notValidBefore" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="6"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="notValidAfter" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="6"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="baggageAllowance" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an2..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="2"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="fareBasis" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="ticketDesignator" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="fareData" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="issueIdentifier">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="monetaryInfo" maxOccurs="3">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="amount">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..18</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="18"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="currencyCode">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="taxFields" minOccurs="0" maxOccurs="99">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="taxIndicator">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="1"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="taxCurrency">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="taxAmount">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..12</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="12"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="taxCountryCode">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="taxNatureCode" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="segmentAssociation" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="selection" maxOccurs="10">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="option">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="optionInformation" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="35"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="referenceForTstData" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reference" minOccurs="0" maxOccurs="198">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="qualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="9"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B080000000000000085904F6B023110C5EFF914DE4BDD58B0E0C21E16743DB92D6AE95162326A207FB6996CE9227EF74E76D7E2AD90C3CBCCE4BD5F66BDAA57DB72BF5A1EDEEAE285CFF8339FD3997C8272804A7413BEC8E7AFF98C4FD69BFD13E739E7CC090BD80809C535760DDC0ED76F08A8BD2315C080C054136770B2BB31E9AD0517B1380983C08C77E76450C4D00253BE3D1AD8C1574BC3F02EA2BC0C8D9336B06D0D14CE5724FB7BFFAC8F4CEA9F584244D24B88421B241B07540B6718397EACD993D3D0283765B2C5EA9EC2505EC08A4480B417BEC8F882A511B5EB1BA349E3B58B35C407F031B7C4DE7D18935E01421C298E045AFFADF01263936719E14C85150A5A9CD2C63216BC8F0F9F65684588497E382D75EC46EB81132B1F4AA3C918EF14F4D34A8351B8F321821AC77F0189F1CD5BF0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_Cancel_09_1_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/PNRXCL_09_1_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/PNRXCL_09_1_1A">
  <xs:element name="PNR_Cancel">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="reservationInfo" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="reservation">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="controlNumber">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="20"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="pnrActions">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="optionCode" maxOccurs="40">
                <xs:simpleType>
                  <xs:restriction base="xs:decimal">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                    </xs:annotation>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="cancelElements" minOccurs="0" maxOccurs="4">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="entryType">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="1"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="element" minOccurs="0" maxOccurs="999">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="identifier" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="number" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="subElement" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..5</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B080000000000000085904F6B023110C5EFF914DE4BDD58B0E0C21E16743DB92D6AE95162326A207FB6996CE9227EF74E76D7E2AD90C3CBCCE4BD5F66BDAA57DB72BF5A1EDEEAE285CFF8339FD3997C8272804A7413BEC8E7AFF98C4FD69BFD13E739E7CC090BD80809C535760DDC0ED76F08A8BD2315C080C054136770B2BB31E9AD0517B1380983C08C77E76450C4D00253BE3D1AD8C1574BC3F02EA2BC0C8D9336B06D0D14CE5724FB7BFFAC8F4CEA9F584244D24B88421B241B07540B6718397EACD993D3D0283765B2C5EA9EC2505EC08A4480B417BEC8F882A511B5EB1BA349E3B58B35C407F031B7C4DE7D18935E01421C298E045AFFADF01263936719E14C85150A5A9CD2C63216BC8F0F9F65684588497E382D75EC46EB81132B1F4AA3C918EF14F4D34A8351B8F321821AC77F0189F1CD5BF0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_Ignore_04_1_IA.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/CLTREQ_04_1_IA" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/CLTREQ_04_1_IA">
  <xs:element name="PNR_Ignore">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="clearInformation">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="actionRequest">
                <xs:simpleType>
                  <xs:annotation>
                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                  </xs:annotation>
                  <xs:restriction base="xs:string">
                    <xs:minLength value="1"/>
                    <xs:maxLength value="3"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 5.0.0 by Amadeus S.A.S.-->
<!--Build Key:
1F8B08000000000000009593C16EDB300C86EF7A8ADC7618123B6D07AC0174706B272BD0A45DE2DD0218AACD384265C913E5A246D1772F253B587ADA7631489AFE497EA457D926DB267996160F1B7E11CFAFA6F1F7E93C9EEC3A5D897E127F5B5C5E2E2EE693D53AFF1AC78B3866C93A717D0BB8940AB46880B32781B0210B5B51023F3AD72EA2E8B55133D1880A3A9C95A689D813292A48A5E511827352D71855B244561EA17CDED1B311DCD90E58692AA014E4DA68EF350D68F20E4261705BA17B5F8FEB4E290AB4BD95F5D10D6E0507D129B7B26D4E5D56836265BA27053BF8DD812EE151B8F238CA81BEF9A7EE41FFC979F3F3BF176F2F60511A4D960505244396A8A942FFCE0E4467DB29EAD17850C10FB4C2C7DEFA8B8032A550E388CAD415714B17FB1F5992EEB34A1E44E9726314EEB3BC48253AA1DD2D912160846ABF16F6193CE22107035CDCDF9B9AB4741D1A09601AB0358C2882BD94A02ADC19EB88DD298E485D25E8817E8EA5E08454E3A2F47F016A8DD46E036E584668C61AE3CEF804DFDFCB8C0D03789E48471A5F47F1F518C3A5B18992A48D8308827D9125602A4B47B585ED0786D808EBBCEE2F2D4BE9FA7110678546257C2AD1E1441AA351394FD6D15B054AD21882CEE77D466F996FAF1AAF7590A05BB9FD7CA31409AC02965754EEA1736DE796465560B90F30369DAE07865F7022F5C1D82634319DB28110BF4BD859719E3C26C5E3665BCC2FE89A1B2135DFDD6C19BCB6B4AA426091662BBE4CEE77D96937136141F0F9D5C9E7B7F7F936FBC95AFA15241E4FBFC6B8193E27EB45FA759119A8880090FBA277B53616D86935E7B171C73CBE621F09717ABE4C040000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_IgnoreReply_04_1_IA.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/CLTRES_04_1_IA" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/CLTRES_04_1_IA">
  <xs:element name="PNR_IgnoreReply">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="sbrRecLoc" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="reservation">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="controlNumber">
                      <xs:simpleType>
                        <xs:annotation>
                          <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                        </xs:annotation>
                        <xs:restriction base="xs:string">
                          <xs:minLength value="1"/>
                          <xs:maxLength value="20"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="clearInformation">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="actionRequest">
                <xs:simpleType>
                  <xs:annotation>
                    <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                  </xs:annotation>
                  <xs:restriction base="xs:string">
                    <xs:minLength value="1"/>
                    <xs:maxLength value="3"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 5.0.0 by Amadeus S.A.S.-->
<!--Build Key:
1F8B08000000000000009593C16EDB300C86EF7A8ADC7618123B6D07AC0174706B272BD0A445ECDD0218AACD384265C913E5A246D1771F253B587BDA7631489AFE497EA437D92EDB274596960F3B7E112FAFE6F1F7F9329EE5BDAEC5308BBFAD2E2F5717CBD9665B7C8DE3551CB3649BB8A1035C4B055AB4C0D99340D891859DA8809F9CEB5651F4DAAA8568450D3D2E2AD346EC891415A4D2F208C139A91B8C6A5921AB4E503DE7F46C0577B60756991A2805B936DA7B6D0B9ABCA35018DC4EE8C1D7E3BA578A02DD60657372A35BC351F4CA6D6C575097F5A8589BFE49410EBF7AD0153C0A579D2639D037FFD43DE83F396F7EFEF7F2ED052C4AA3C9B2A08064C8120D5518DED991E8EC7B453D1A0F2AF88156F8D85B7F1150A6126A1A5199A6266EE9EAF0234BD24356CBA3A85C618CC2435694A94427B4BB2532048C501DB6C23E83473CE660808B877BD390966E4223014C0BB6810945B0D712548DB9B18ED89DE388D455821EE8E7580A4E48352D4AFF17A0CE48ED76E0C6658466AC31EE039FE0FB7B59B07100CF13E948E3EB28BE9E62B836365192B4711441B02FB2024C65E5A8B6B0C3C8105B619DD7FDA96525DD300DE2ACD0A8844F253A9C4863342917C9367AAB41491A43D0F9BC2FE82DF3EDD5D3B58E12742BB79F6F94228155C0F28ACA3DF4AEEBDDDAA81A2CF701C6E6F3EDC8F00BCEA43E1ADB8626E6733612E27709FB509C278F49F9B8DB97CB0BBAE65648CDF39B3D83D78E56550A2CD36CC3D7C97D9E9D77331316045F5E9D7D7E7B5FECB39C75F42B483C9D7F8D69337C49D68BF4EB223350110120F745EF1A6D2CB0F36A3EC4F6D0A9814D8BE6F115FB0D5CD7C3C651040000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_Retrieve_09_1_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/PNRRET_09_1_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/PNRRET_09_1_1A">
  <xs:element name="PNR_Retrieve">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="settings" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="options">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="optionCode" maxOccurs="40">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                          </xs:annotation>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="printer" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="identifierDetail" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="name">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an5..6</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="5"/>
                                <xs:maxLength value="6"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="network" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="2"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="office" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="9"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="teletypeAddress" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an7</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="7"/>
                          <xs:maxLength value="7"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="retrievalFacts">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="retrieve">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="type">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: n1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="service" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="3"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="tattoo" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="office" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="9"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="targetSystem" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="2"/>
                          <xs:maxLength value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="option1" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="option2" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="reservationOrProfileIdentifier" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="reservation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="controlNumber">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="20"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="personalFacts" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="travellerInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="traveller">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="surname">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a..57</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="57"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passenger" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="firstName">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a..56</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="56"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="productInformation" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="product" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="depDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="depTime" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="4"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="arrDate" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="boardpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="offpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="3"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="company" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="code">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:decimal">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n..4</xs:documentation>
                                      </xs:annotation>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="subtype" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ticket" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="airline">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="3"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="ticketNumber">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n10</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="10"/>
                                <xs:maxLength value="10"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="frequentFlyer" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="frequentTraveller">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="companyId">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an2</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="2"/>
                                <xs:maxLength value="2"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="membershipNumber">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..27</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="27"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="accounting" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="account">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="number">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="30"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B080000000000000085904F6B023110C5EFF914DE4BDD58B0E0C21E16743DB92D6AE95162326A207FB6996CE9227EF74E76D7E2AD90C3CBCCE4BD5F66BDAA57DB72BF5A1EDEEAE285CFF8339FD3997C8272804A7413BEC8E7AFF98C4FD69BFD13E739E7CC090BD80809C535760DDC0ED76F08A8BD2315C080C054136770B2BB31E9AD0517B1380983C08C77E76450C4D00253BE3D1AD8C1574BC3F02EA2BC0C8D9336B06D0D14CE5724FB7BFFAC8F4CEA9F584244D24B88421B241B07540B6718397EACD993D3D0283765B2C5EA9EC2505EC08A4480B417BEC8F882A511B5EB1BA349E3B58B35C407F031B7C4DE7D18935E01421C298E045AFFADF01263936719E14C85150A5A9CD2C63216BC8F0F9F65684588497E382D75EC46EB81132B1F4AA3C918EF14F4D34A8351B8F321821AC77F0189F1CD5BF0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\PNR_List_00_1_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/TNLRES_00_1_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/TNLRES_00_1_1A">
  <xs:element name="PNR_List">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="freeFormText" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="freetextDetail" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="subjectQualifier">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="type" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="4"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="text" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="70"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="citypair">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="originDestinationMarker">
                <xs:complexType>
                  <xs:sequence/>
                </xs:complexType>
              </xs:element>
              <xs:element name="travellerInformationSection" maxOccurs="300">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="travellerInformation">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="traveller">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="surname">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..57</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="57"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="passenger" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:sequence>
                                  <xs:element name="firstName">
                                    <xs:simpleType>
                                      <xs:restriction base="xs:string">
                                        <xs:annotation>
                                          <xs:documentation xml:lang="en">Format limitations: an..56</xs:documentation>
                                        </xs:annotation>
                                        <xs:minLength value="1"/>
                                        <xs:maxLength value="56"/>
                                      </xs:restriction>
                                    </xs:simpleType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="relatedProduct" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="quantity" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:decimal">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: n..3</xs:documentation>
                                </xs:annotation>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="status" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="travelProduct" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="product" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="depDate">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: n6</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="6"/>
                                      <xs:maxLength value="6"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="boardpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="offpointDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="cityCode">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="5"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="companyDetail" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="productDetails" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="4"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="subtype" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="reservationInfo">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="reservation" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="companyId">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="controlNumber">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="20"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="productInfo" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="product" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="identification">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: a1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="description" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="1"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="messageAction" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="business">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="function" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="errorInformation" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="errorDetail">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="errorCode">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="qualifier">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="responsibleAgency">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B080000000000000085903F6FC23010C5777F0AF6AAC46D95814819224198482BA0EA885CFB004BFE93FA9CAA11E2BBF79C848AAD9287E7BBF37B3FDF7AD5ACB6D57EB53CBC36E5337FE28F3CA733FB00E50095E8677C51E479F192CFD69BFD03E705E7CC090BD80A09E525F62D5C0F976F08A8BD2315C080C054132770B2BF32E9AD0517B13C0A83C08C77A76450C6D00153BEFB34B083AF8E86E14D44791E1B476D60DB19289DAF490EF7E1D91099D43FB18488A49710853648360EA8164E3071FC58B327A7B1516DAA648BF52D85A13C83158900692F7C91F1054B236A37342693D66B171B8877E0536E8583FB3826BD028438517C1268F3B7C2738C6D91658433175628E8704E1BCB58F03EDE7D96A1152126F9EEB4D4B19FAC474EAC7DA88C2663BC51D04F6B0D46E1CE87086A1AFF058E25EE5DF0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\Security_TrustedUserSignIn_07_2_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/VLSTLQ_07_2_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/VLSTLQ_07_2_1A">
  <xs:element name="Security_TrustedUserSignIn">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="conversationClt" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="senderIdentification">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="35"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="recipientIdentification">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="35"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="senderInterchangeControlReference">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="14"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="recipientInterchangeControlReference">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..14</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="14"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="userIdentifier" maxOccurs="2">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="originIdentification" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="inHouseIdentification1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="originatorTypeCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="1"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="originator" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..30</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="30"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="remoteOffice" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="sourceType">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="sourceQualifier1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="originatorDetails">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="inHouseIdentification1" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..9</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="dutyCode" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="referenceDetails">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="type">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="value">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="35"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="systemDetails" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="workstationId" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="35"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="deliveringSystem" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="companyId" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="35"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="idQualifier" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an1</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="1"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="roleDataSection" minOccurs="0" maxOccurs="3">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="labelOfRole">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="roleLabel">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..50</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="50"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="roleApplication">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="applicationDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="label">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="10"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="description" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..100</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="100"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="roleOwner">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="organizationDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="label">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="10"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="roleData" minOccurs="0" maxOccurs="4">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="dataTypeAndValue">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="attributeDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="attributeType">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="3"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="attributeDescription">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..70</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="70"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dataApplication" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="applicationDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="label">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="description" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..100</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="100"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="dataOrganization">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="organizationDetails">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="label">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                                      </xs:annotation>
                                      <xs:minLength value="1"/>
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="preferenceSection" minOccurs="0" maxOccurs="5">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="preferenceLabelDescription">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="preferenceTokenDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="label" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..20</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="20"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="description" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..100</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="100"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="preferenceValue">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="freeTextDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="textSubjectQualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="informationType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="status" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="companyId" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="35"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="language" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="source">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="encoding">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="freeText" maxOccurs="99">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..199</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="199"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="fullLocation" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="workstationPos">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="locationType">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="locationDescription" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="code" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="35"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="qualifier" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="17"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="firstLocationDetails" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="code" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..25</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="25"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="qualifier" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..17</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="17"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="locationInfo" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="facilityDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="type">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="identifier" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="5"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="applicationId" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="applicationDetails" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="internalId">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..35</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="35"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="versionNumber">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="seqNumber" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..6</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="6"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="releaseNumber">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="revisionNumber" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="allocateCrt" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="statusDetails">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="indicator">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="type">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="3"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B08000000000000008590CB6AC3301045F7FA8AEC4B63B534051BBC30C4CE2A6E4952BA0C8A3449047AB81AB9D484FC7BC78F94EC0A5A5CCD8CEE3D9A5559979B62572EF76F75FECC9FF8235FD0997D8272804A74339E668BD7EC259DADD6BB07CE33CE991316B01112F24BEC1AB8EE2FDF10507B472A8001817D4D9CC0C9EECAA4B7165CC4FC280C0233DE9D7A833C861698F2EDC1C016BE5A1A867711E5796C1CB5814D6B2077BE2239DC87674364AFFE89254424BD8428B441B27140B5708289E3C79A1D398D8D625DF4B658DD5218CA3358D11320ED85A7094F593FA2B643633269BC76B18678073EE51638B88F63D22B408813C58140EBBF159E636CB224219CB9B042418B73DA58C282F7F1EEB30CAD08B1971F4E4B1DBBC97AE4C4CA87C26832C61B05FDB4D260146E7D88A0A6F15FA2194CF6F0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\Security_TrustedUserSignInReply_07_2_1A.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="http://xml.amadeus.com/VLSTLR_07_2_1A" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/VLSTLR_07_2_1A">
  <xs:element name="Security_TrustedUserSignInReply">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="errorSection" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="applicationError">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="errorDetails">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="errorCode">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..5</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="5"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="errorCategory" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="errorCodeOwner" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="interactiveFreeText" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="freeTextQualification" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="textSubjectQualifier">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="informationType" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..4</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="4"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                          <xs:element name="language" minOccurs="0">
                            <xs:simpleType>
                              <xs:restriction base="xs:string">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Format limitations: an..3</xs:documentation>
                                </xs:annotation>
                                <xs:minLength value="1"/>
                                <xs:maxLength value="3"/>
                              </xs:restriction>
                            </xs:simpleType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="freeText" minOccurs="0" maxOccurs="99">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..250</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="250"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="processStatus" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="statusCode">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: a..6</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="6"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="organizationInfo" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="organizationDetails">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="label">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                          </xs:annotation>
                          <xs:minLength value="1"/>
                          <xs:maxLength value="10"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="conversationGrp" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="processIdentifier">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Format limitations: an..10</xs:documentation>
                    </xs:annotation>
                    <xs:minLength value="1"/>
                    <xs:maxLength value="10"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>
<!--SchemaRules="2009/09"-->
<!--Created with SchemaBuilder 4.1 by Amadeus S.A.S.-->
<!--Build Key:
1F8B08000000000000008590CB6AC3301045F7FA8AEC4B63B534051BBC30C4CE2A6E4952BA0C8A3449047AB81AB9D484FC7BC78F94EC0A5A5CCD8CEE3D9A5559979B62572EF76F75FECC9FF8235FD0997D8272804A74339E668BD7EC259DADD6BB07CE33CE991316B01112F24BEC1AB8EE2FDF10507B472A8001817D4D9CC0C9EECAA4B7165CC4FC280C0233DE9D7A833C861698F2EDC1C016BE5A1A867711E5796C1CB5814D6B2077BE2239DC87674364AFFE89254424BD8428B441B27140B5708289E3C79A1D398D8D625DF4B658DD5218CA3358D11320ED85A7094F593FA2B643633269BC76B18678073EE51638B88F63D22B408813C58140EBBF159E636CB224219CB9B042418B73DA58C282F7F1EEB30CAD08B1971F4E4B1DBBC97AE4C4CA87C26832C61B05FDB4D260146E7D88A0A6F15FA2194CF6F0010000-->]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:\C:\Users\n475111\Downloads\CP2_PNR_1_TST_1.0\WBS_Session-2.0.xsd</con:url><con:content><![CDATA[<!--"Amadeus Proprietary and Confidential Information: unauthorized use and disclosure strictly forbidden. 2010 - Amadeus s.a.s - All Rights Reserved."-->
<!--New version to be W3C compliant-->
<xs:schema targetNamespace="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" elementFormDefault="qualified" attributeFormDefault="unqualified" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:awssec="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd">
  <xs:element name="Session">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="SessionId" type="xs:string">
          <xs:annotation>
            <xs:documentation>This element defines the identifier part of the SessionId.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="SequenceNumber" type="xs:string">
          <xs:annotation>
            <xs:documentation>This element defines the sequence number of the SessionId.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="SecurityToken" type="xs:string">
          <xs:annotation>
            <xs:documentation>This element defines the SecurityToken of the SessionId.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://BAaccess.test.webservices.1a.amadeus.com/1ASIWCP2BA</con:endpoint></con:endpoints><con:operation id="f3791317-a23a-4603-a0a1-9622e948b6de" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/PNRADD_09_1_1A" name="PNR_AddMultiElements" bindingOperationName="PNR_AddMultiElements" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="4d8466a1-61a5-4ccc-aef5-287b7d0202b9" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/PNRXCL_09_1_1A" name="PNR_Cancel" bindingOperationName="PNR_Cancel" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="0552bdff-6139-48a2-94f8-07cddbfd8446" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/CLTREQ_04_1_IA" name="PNR_Ignore" bindingOperationName="PNR_Ignore" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="efd06622-eca2-4379-90e0-f5eae99c11d1" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/PNRRET_09_1_1A" name="PNR_Retrieve" bindingOperationName="PNR_Retrieve" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="c5b76460-a3c9-4cec-b554-21b618337491" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/PNRRET_09_1_1A" name="PNR_Retrieve2" bindingOperationName="PNR_Retrieve2" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="fa79bb06-46ab-4ea4-b9d2-65b6418a0349" isOneWay="false" action="http://webservices.amadeus.com/1ASIWCP2BA/VLSTLQ_07_2_1A" name="Security_TrustedUserSignIn" bindingOperationName="Security_TrustedUserSignIn" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:testSuite name="Normal Booking" id="b102184f-4e85-4e6f-b85d-0cbee43c6ec7">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking" searchProperties="true" id="341df036-44ab-4998-9d04-c155fec200ad">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="e7033c93-c2cc-4547-af82-0a3ff0a6b4de"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="a9152627-320f-48ff-ac2d-34476c88479d"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="46408071-c234-4b82-ab0d-6fc611d29285"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="5311d8c1-9c53-4098-adbe-2a2e20a6257d"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="2f14b1e3-368b-4d96-b9eb-f4b79d2504bd"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="e1e4526f-a537-4936-8cba-519d1bb602bb"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="57501556-a8cb-4975-ba88-7299c9c0dfcb"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="42aa65d1-6bec-4374-bfd3-bd13df774e03"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="d3ad59e7-bcac-4ec3-b35f-23e098a11c49"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="fd3bbe6f-cbd5-4c09-b8f5-7fce509af6c4"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="6f5a8ed7-6226-4b27-b88b-89a2e9239851"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="330afc3f-8dc4-41a3-b04b-91ed7ea335a9" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="39f0f976-7b2d-4b09-8b34-a27c9523d88f" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="77d610a8-2cf1-4051-bf5e-6cf3ac88918e" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="aacde572-bff4-487b-8cb0-6b5d905eeeca" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="936b1010-9109-4684-bb05-732f09c2b5c1"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="edab4d09-81e9-4232-9ee0-d4a0e450c295"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>CDG</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005080343</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005100503</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">QFOXIW</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-20</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-27</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>NWV2R</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-20T12:40:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-20T06:25:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>CDG</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0832</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670323</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABA_Booking" searchProperties="true" id="b33649fe-83c5-4dc7-9a54-06dd3511d1db">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="4c9e46eb-7545-4ff1-93bc-972143bd4aee"><con:settings/><con:config><script>def today = new Date()
def outbound = today

def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="89bdceb8-dae4-4952-b359-ae887bff1b6e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="36412c7e-a176-4a9b-99b0-0592d017b63d"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="b3202cb2-f75c-4b6c-89ac-0cd97a10fa55"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundAircraftType", "321")
testRunner.testCase.setPropertyValue("inboundCabin", "M")
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].departs)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].destination)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].origin)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])



def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="00610f01-4c20-461e-ab41-2b70ed53d971"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ],
  "inboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#inboundArrival}",
      "cabinCode": "${#TestCase#inboundCabin}",
      "departureDateTime": "${#TestCase#inboundDeparture}",
      "destinationAirport": "${#TestCase#inboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#inboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#inboundOriginAirport}",
      "sellingClass": "${#TestCase#inboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="ce008c15-68cc-4492-a8f5-c1c37b6cf9d3"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="52b602f1-5ea1-4550-871d-081ce578588c"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="f9bfe61d-5f55-4af7-8d19-27f600d49f8c"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="3bf4fdb9-6e9a-46b4-8c83-b8d187c41505"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="1e69dd16-260a-4768-b178-c2f379a68141"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="e2bff131-07f9-4722-a414-bee2d822470c"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="8e3b1a1e-6fa8-44c9-bfb7-458dbc21f91b" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="907e03be-fc91-4375-b48d-066b511fef13" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="56f194ef-742c-48cc-9c71-3e8eb618c872" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="ce81d90f-a4f7-4861-b3dc-d46dc134fbde" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="05af4e7c-abb9-4ab9-943e-44bb5d6c2faa"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="3d92fd6c-2ffb-44fb-a9b7-dc66388300a0"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100004623421</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004641625</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LSVN59</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-09-11</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-09-18</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>Q</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">K</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>QMHM0Z0R</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">KWHZ0R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-09-11T18:55:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-09-11T13:15:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-09-18T10:05:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-09-18T08:05:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670327</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABC_Booking" searchProperties="true" id="718a2d3c-297c-45f6-8590-13cdfe26ee75">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="ffcec84c-6f0f-498c-9cd9-cfb7b49587ba"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="4b5d9884-0897-4ca4-a48a-75f0825ec9b7"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="5fc3055b-262b-45b4-8c1e-52c7e68d5dc8"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="121c1795-2598-42bf-9276-0b6311bf47bc"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="5205912e-b2e3-4751-93eb-a47a564975c1"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    },
	 {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outbound1Arrival}",
      "cabinCode": "${#TestCase#outbound1Cabin}",
      "departureDateTime": "${#TestCase#outbound1Departure}",
      "destinationAirport": "${#TestCase#outbound1DestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outbound1FlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outbound1OriginAirport}",
      "sellingClass": "${#TestCase#outbound1SellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="02d05671-e314-402d-b3e5-03c0e466843c"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="c9b9df6b-35d7-4fc3-94e7-e02063cfed12"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="f559e3b7-a78b-40ce-8820-3dca6294dddd"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="ae0bdde1-0fe2-4cde-9ae5-30978364270e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="de60373b-e6e7-490c-a522-39682fefbbd7"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="e5416f2a-a5ed-4db2-b28b-03fb52000ae7"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="a5916e38-4b7b-4d54-b370-d875d9fe8daa" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="fd3b38fb-809a-4936-a6d5-24da7af9d864" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="172bc745-78da-438b-9333-0fd039982510" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="2d12b7e1-4013-4ea0-8812-f65b8c82df06" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="dbb9aad5-e06a-4371-80eb-3bf406cc317d"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="7729619b-aad9-4a6a-a69f-7e9b540ae348"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100008696236</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100008670335</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">T6EQED</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-06-12</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-06-19</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>NADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-06-12T14:40:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-06-12T06:05:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1},{"passengerType":"CHILD_AGE_12","count":1},{"passengerType":"Child","count":1},{"passengerType":"Infant","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670336</con:value></con:property><con:property><con:name>outbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>L</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>LELV2RO</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2019-06-12T14:40:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2019-06-12T08:55:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1AircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Cabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Arrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Departure</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCBA_Booking" searchProperties="true" id="7a68d8e0-5cb5-4fee-8e1f-d73bd416a1ba">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="e2b18f30-049a-44f5-87bd-efafb7e3f31c"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="053c46fc-8285-4f84-91c4-e14050288fb0"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="27e7cb02-6445-4889-969b-fefd31d90914"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="2f083fc0-1f9b-46cf-8a5a-8f9833ecbd3b"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])



testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[0].flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("inbound1SellingClass", response.flights[0].flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("inbound1FareBasisCode", response.flights[0].flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("inbound1Cabin", response.flights[0].flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("inbound1Arrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inbound1Departure", response.flights[0].flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("inbound1DestinationAirport", response.flights[0].flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("inbound1OriginAirport", response.flights[0].flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("inbound1FlightNumber", response.flights[0].flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="3323767e-1265-46fc-8bd3-95829d53303d"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        },
		{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inbound1Arrival}",
            "cabinCode" : "${#TestCase#inbound1Cabin}",
            "departureDateTime" : "${#TestCase#inbound1Departure}",
            "destinationAirport" : "${#TestCase#inbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inbound1OriginAirport}",
            "sellingClass" : "${#TestCase#inbound1SellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="991d086c-6d1d-4ff6-9928-b5807a8f9462"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="ae852b71-4f7a-48a8-8754-21fa0128018d"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="ecbee0e5-a537-491a-b41e-464f12feffe9"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="9af364f2-78b1-4aee-ad88-e1e4ca595f55"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="a8b1a193-9130-42f8-b094-7fe845dfa32e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="5c28e383-bf90-4f1c-9958-e8ae0a8d04fd"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="56d7008b-9965-4ea2-8c91-edf5f64750a2" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="9b1f81cf-78f3-41ef-a63e-eb8b5510e5d8" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="eb9fa8b7-b3e7-45b8-81c4-daae5badace8" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="ac76e5eb-e476-4775-a134-1668c8b895d3" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="7f6efb00-be44-4c3e-876d-52729a554f1e"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="89330228-d8a8-4491-8b1e-abfb42fb4190"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100008696243</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100008670350</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">T6IWIS</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-06-19</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-06-26</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">V</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>NADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">VPHV2R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-06-19T14:40:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-06-19T06:05:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-06-26T15:40:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-06-26T08:05:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1},{"passengerType":"CHILD_AGE_12","count":1},{"passengerType":"Child","count":1},{"passengerType":"Infant","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670351</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>L</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>LTHV2R</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2019-06-19T14:40:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2019-06-19T08:55:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value>NADDV2RO</con:value></con:property><con:property><con:name>inbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>inbound1Arrival</con:name><con:value>2019-06-26T15:40:00.000</con:value></con:property><con:property><con:name>inbound1Departure</con:name><con:value>2019-06-26T14:25:00.000</con:value></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value>1334</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCA_Booking_notWorking" searchProperties="true" id="4e5943bd-4f81-4476-86c1-4d122875fb41">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="bb86cd43-ae95-499d-8752-712adba649ea"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="12813a34-70c3-4232-be7b-caee8399111e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=LHR;outboundDestination=SYD;outboundDate=${#TestCase#outboundDate};inboundOrigin=SYD;inboundDestination=LHR;inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="9490bef9-dd50-4c7e-9cd2-b337bd4d2f33"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="13a05f82-52db-42c9-b26f-7ff48989a89f"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)

int i,j;
for(i=0;i<response.flights.size();i++)
	{
		if(response.flights[i].segments[0].code=="BA0011" && response.flights[i].segments[1].code=="BA0015")
		break
	}
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[i].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[i].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[i].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[i].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[i].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[i].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[i].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[i].segments[0].code.split("(?<=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[i].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[i].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[i].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[i].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[i].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[i].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[i].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[i].segments[1].code.split("(?<=\\D)(?=\\d)")[1])

for(j=0;j<response.flights[i].flights.size();j++)
	{
		if(response.flights[i].flights[j].segments[0].code=="BA0016")
		break
	}

testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[i].flights[j].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[i].flights[j].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[i].flights[j].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[i].flights[j].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[i].flights[j].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[i].flights[j].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[i].flights[j].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[i].flights[j].segments[0].code.split("(?<=\\D)(?=\\d)")[1])

def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)]]></script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="36aba611-cac9-4a52-aff6-e38b69f4f342"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult",
                    "fareBasisCode" : "${#TestCase#outboundFareBasisCode}"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult",
                   "fareBasisCode" : "${#TestCase#outbound1FareBasisCode}"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult",
                    "fareBasisCode" : "${#TestCase#inboundFareBasisCode}"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        }
    ],
        "availabilityEngine" : "FlexPricer",
    "functionalArea" : "FLIGHTSELECTION",
    "cugBasket" : false
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="c0e1c2d8-10e1-48d3-944a-ac9269e08d30"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="a06c163c-fe86-4ef6-9e4c-db7631ed7dc0"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="7a5a0972-304b-483e-ae42-52412bd701c9"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="e656c651-d0ff-4eaf-80e8-db6b54fd2f45"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="ccbc1ca0-dc4a-466b-b92e-747f097a0ef2"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="7f8f400f-36d0-4fb2-ae8b-7ca189e7fdf3"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="5844624f-72d0-4524-99f7-17535304d14b" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="8fc539e1-5956-4749-b178-0f93e313df28" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="96e84c01-ef20-4b84-bcda-888c781b59d2" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="634035a2-e57a-4e6f-a9d8-36d49a8b6c7b" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="fd045e69-1191-4fe1-9416-3d63939b6768"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="542be178-7628-432a-843e-60c55ef9346d"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>SYD</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100008696262</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100008670368</con:value></con:property><con:property><con:name>pnr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-06-27</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-07-04</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>T</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>TLNC00S7</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">MLNC00M7</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>W</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-06-29T05:10:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-06-27T19:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>SIN</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0011</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-07-05T05:05:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-07-04T14:50:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SYD</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0016</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100003877720</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>Y</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>TLNC00S7</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2019-06-29T05:10:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2019-06-28T19:25:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>SYD</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>SIN</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0015</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking_Today" searchProperties="true" id="fff95a4b-6dba-43f0-8188-6d4054b10aa6">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="fa03796b-ddb6-4539-be18-bc85d9f258de"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) 
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="2f817ea2-1ea0-482b-b638-bb4deeb6efec"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="a73320b9-6766-47fa-ba80-5684bd72a5a6"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="2fbb5e23-62a2-4b56-a9f8-6d441421ec94"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="83dcc632-54b1-4140-85b0-96b2b73c8e3c"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="5998600d-f35b-4214-ba40-ab30e255ae64"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="4f7e7837-e4d5-488b-8c9e-d3e1b851c94c"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="b780c9b9-64a2-428f-bcc5-28437747593d"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="2980fc3d-8df5-4980-a2d8-f9b89f225cd3"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="3713b31c-9a77-47d8-9cb2-32a7b3c92a10"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="10be6b06-a973-4390-a139-f8e2cc0d87a8"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="d5a63e3e-1411-4dcc-91d7-256ad7935df8" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="de07771b-ac18-456c-869f-329c0b878480" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="d5c861b0-14e4-499e-8133-7769f48d7011" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="f1515d3c-23e4-4319-8d68-13f4038f3825" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="d4f2daa5-356a-488b-9ca1-39ccd9a4c74b"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="25ccb85b-2dc7-4f7a-9f16-9015a76bc704"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>CDG</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100004612536</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004630782</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">QFOXIW</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-10-11</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-10-18</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OEIR</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-10-11T12:40:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-10-11T06:40:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>CDG</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>5949</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670323</con:value></con:property></con:properties>
        </con:testCase><con:properties><con:property><con:name>sec_session_id</con:name><con:value>123456</con:value></con:property></con:properties>
    </con:testSuite>
    
    <con:testSuite name="Normal Booking+JBR" id="686fe213-4e8f-4bfe-9445-3702c19d2a50">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking" searchProperties="true" id="fc2c3c5f-d118-45b2-aed3-d63a300be6b8">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="46bad718-4e3a-4311-9e30-334f4d969527"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="6172ca16-99af-41c4-8cc9-5d2929c1203b"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="5445162b-6ae8-47b8-8425-3c1645981fa3"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="20b8d71c-5f84-4259-8a95-f6531d718182"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="f41e97d7-ae8b-45d5-bd2b-53610927d0a3"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="a87b2c7b-d9b3-4526-a7d0-bda634289987"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="ad73c9f7-b0c7-4f78-a025-8c5326ee4589"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="5ecdd3e1-bb61-4f43-92f8-6d01c93fdba8"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="faafef57-9779-4858-ab9e-f57aedc3375c"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="81fd5378-75a7-4ff8-9567-8fbef8c8ba74"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="32e2e3ef-ef18-495c-a09c-ab4c0b73ead1"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="536c3c1a-5f7a-432f-acfd-77ac958edf41" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="54ec44ee-e74d-4dba-b477-f61601dddae0" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="aef9c05d-0dfe-4320-8fdf-a8f64d581885" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="4f759134-2aa7-4f9e-a60c-876d1343296f" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="d72a0b4c-16bc-4f00-bc32-05915b52cb18"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="21d790ef-236b-4a11-b806-d9dfa998808b"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="6dd68026-6fdf-42ed-9ba8-976cd1a4468a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="2af1589e-89e7-4379-aaa5-28be01c66f05"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="d4fbbba6-2912-42a1-8a07-b106654cf434"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005373341</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005392501</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">S2VFMY</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-13</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-20</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>NWLZ0RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-13T13:30:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-13T07:50:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670323</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABA_Booking" searchProperties="true" id="d1ac8e5f-0c06-40d9-b6e0-1940592b5977">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="eff338d7-8a29-43f4-a01f-65a1ccbc772b"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="c53be92d-9d83-45a6-bfad-f026dc447557"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="ebc9fe1a-1eee-4154-8fb5-f33627fe4fd5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="0191ad47-c0d8-42f6-8b57-fe51d11db395"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundAircraftType", "321")
testRunner.testCase.setPropertyValue("inboundCabin", "M")
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].departs)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].destination)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].origin)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])



def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="778dd86d-ab0d-4451-9e5c-b93bc38aa565"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ],
  "inboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#inboundArrival}",
      "cabinCode": "${#TestCase#inboundCabin}",
      "departureDateTime": "${#TestCase#inboundDeparture}",
      "destinationAirport": "${#TestCase#inboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#inboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#inboundOriginAirport}",
      "sellingClass": "${#TestCase#inboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="dc5f89ba-0119-45be-afe9-dd299d534d59"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="d976c4c1-a9b2-4d4c-96c4-6e77fff5ef10"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="62bbbb28-61c8-49c3-926f-a05a99f41d3e"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="38d7a1c4-81fa-4a4d-94aa-4281a085708d"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="72373f9b-bd51-45eb-8204-f25d2a451f09"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="2e9810f5-7ceb-408a-9be0-58d6382aefbb"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="14407134-749b-4abc-8cee-b8c44646e48c" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="54dd947b-6ca6-41c2-b11d-130c2a5c5015" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="fc1ac38f-9156-490a-bfd9-9299af8f00b3" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="af8f4d52-6768-48e3-b55f-6acfc615cb24" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="3f1b3966-e919-47b6-84d3-eec837ecc402"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="6fbf7783-d8d8-496e-bd8f-5bd2e4c67319"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="7fb7221e-ac81-4425-a034-7b690ff160d6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="62606cc6-6e32-4eef-8fbd-a666acbdad65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="b7b7e22e-8469-419f-bb7d-d83add5ff01e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>DUB</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005365519</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004779501</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">N6NCAF</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-02-28</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-03-06</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">O</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OTZ0R</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OEIK</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-02-28T07:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-02-28T06:25:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>DUB</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0832</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-03-06T07:55:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-03-06T06:20:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LGW</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DUB</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5900</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670327</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABC_Booking" searchProperties="true" id="8a835650-9e24-45f3-92c9-391eb3bd3449">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="bbcf2b27-154c-4261-bb92-ad72c529ce1f"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="1306d414-a566-4a4f-88fc-d34270b62dc1"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="60ec4457-3e5c-43bf-a494-8d0c81a3b260"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="9deaaef9-a97f-4756-ab5b-bb0f141c5c0e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="0bee0511-addf-4fbc-a60b-bf5c67f10d64"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    },
	 {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outbound1Arrival}",
      "cabinCode": "${#TestCase#outbound1Cabin}",
      "departureDateTime": "${#TestCase#outbound1Departure}",
      "destinationAirport": "${#TestCase#outbound1DestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outbound1FlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outbound1OriginAirport}",
      "sellingClass": "${#TestCase#outbound1SellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="0c7ee941-1637-430e-9d53-0ffb522b6466"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="7fd19304-7670-465a-a202-783b37d44b88"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="4b5bc81f-14ae-4bd1-b696-eae2c3843e53"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="c20cca9a-d8d6-4437-ab13-eb6f9d952d3e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="bdf5f092-198d-470c-8995-08b1e38881e8"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="7770974b-a989-4685-9143-6392ffb36cdf"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="eeba04d2-a22f-426a-b71c-d899f3192b84" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="da054a66-e549-4f6c-ad5e-2bf1a407e9c5" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="673a1a07-768a-47f9-9bc0-30ba8514687e" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="ffc0b9b7-0981-47e6-bc19-76a05d4aabeb" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="cde98d41-e86c-495b-b78b-c7a1993202ce"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="1a2c934c-088f-4471-93c2-5435cece6897"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="56bc31c7-726f-42e7-a21e-3f8d6cbe27bc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="96a3ce2c-c34e-46e3-af24-61243e7a6a12"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="6da34bb8-63ef-436c-9644-a220aa2571ab"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005365511</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004946714</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OGUPCO</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-13</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-20</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>V</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>VADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-13T07:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670336</con:value></con:property><con:property><con:name>outbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>V</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>VPLV2RO</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-01-13T12:10:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1AircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Cabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Arrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Departure</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCBA_Booking" searchProperties="true" id="6a3bf9a9-f382-457c-983f-eb8375b604af">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="1a256780-cc49-4e64-bec4-5539de33cc14"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="1f518acd-6464-493b-8ff0-199ac0950cd7"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="d671d7d4-cc2c-44f8-afab-1c47f9e6b6c9"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="56cd791f-9d4b-40a5-be37-91b2b964227b"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])



testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[0].flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("inbound1SellingClass", response.flights[0].flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("inbound1FareBasisCode", response.flights[0].flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("inbound1Cabin", response.flights[0].flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("inbound1Arrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inbound1Departure", response.flights[0].flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("inbound1DestinationAirport", response.flights[0].flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("inbound1OriginAirport", response.flights[0].flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("inbound1FlightNumber", response.flights[0].flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="19010288-42f1-43cd-bbf5-df0fcced27c5"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        },
		{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inbound1Arrival}",
            "cabinCode" : "${#TestCase#inbound1Cabin}",
            "departureDateTime" : "${#TestCase#inbound1Departure}",
            "destinationAirport" : "${#TestCase#inbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inbound1OriginAirport}",
            "sellingClass" : "${#TestCase#inbound1SellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="d8450fb1-8d3d-466f-a49a-f1f75e3ec768"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="cf01a5b5-f76c-4fe8-b8af-4a5805588092"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="ac55b60b-da40-43e1-8d3a-122afc603d32"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="43047f8b-2761-409b-aced-4bb3247e9934"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="dbcab4d1-53e6-41d7-8e07-59a5069f3c99"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="154255a3-9204-44a6-bef3-5cc2436d6953"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="0faf6a30-9841-4cd8-88d0-d9c3dab5a759" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="6a9be72a-d015-4337-881d-c9b85eced233" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="def16f7a-f0ce-4634-a696-0f6859d2238a" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="8acec3d3-9ff5-44db-bfb7-8e37c8c20395" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="62446256-3ba8-473e-b857-4ad17e44d739"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="ac9d5b4c-3d1c-40ff-aa63-901b6cf52b1a"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="f9521bb3-b01f-481b-bc69-ee21f686c44f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="2282e645-ee80-4afc-a65c-eeaf4832a9db"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="829490ec-90d1-4bc3-a5ed-dff770af3e65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005371373</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005390560</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RZP549</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-02-11</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-18</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">O</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OTLM0V2R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-02-11T17:35:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-02-11T07:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-02-18T16:10:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-02-18T08:00:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670356</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>NELM0V2R</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-02-11T17:35:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-02-11T11:55:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value>OADDV2RO</con:value></con:property><con:property><con:name>inbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>inbound1Arrival</con:name><con:value>2020-02-18T16:10:00.000</con:value></con:property><con:property><con:name>inbound1Departure</con:name><con:value>2020-02-18T14:55:00.000</con:value></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value>1334</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking_MultipleAdults" searchProperties="true" id="ce94fc3a-338a-4724-895f-163e240edbbf">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="9eb44f24-5dd4-450e-95d4-125a1ae63c4d"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="38ac3591-9b38-4f37-8e91-1776d4e15227"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="f3902ede-e4a4-42a5-9a0c-f5d7d5deb39d"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="f8c835c3-0f56-40a1-98a4-9f1268ec5214"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="b8f6f155-f0ef-49f1-9c3f-05f7c31f0f5d"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="c4f15951-66df-472d-929b-025f13739ed0"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="3ca60469-be3e-42b5-b5b0-24fe86e8da36"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="b4bd5940-b39f-45e7-aa1f-6f87faa3fc04"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="fa58ecb9-043a-4f41-ab80-910afb27c1b4"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="9dcb746b-8409-466a-b8b4-1adf53f3ded5"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="05094a4c-ef3b-49d0-a6d4-07efba3652d4"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="49887ec3-01f5-4384-9407-1159b3b5aa21" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="10a7384e-1cd9-4d37-b107-a985e43e6c55" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="64e94e43-4a59-4ec8-be08-47be62370eed" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="28f6914b-d5ab-4897-ae1d-9db42fed70ff" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="926ff974-dc06-4957-b333-29eae212e5e6"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="37357d24-db57-4c3b-ac24-55514bc404fc"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="625e02f5-6f60-49eb-ac92-6c86f4be1cf9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="77aa9ed1-242e-46ed-9c1a-10890f29de8b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="0b989fd6-8f7e-44b4-b400-7beae286e917"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Business</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005016507</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005036746</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">P5ZCY8</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-27</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-03</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>R</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>RNLV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-27T13:30:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-27T07:50:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2},{"passengerType":"CHILD_AGE_12","count":1},{"passengerType":"Infant","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100005036747</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCA_Booking_notWorking" searchProperties="true" id="71f09954-0780-4bee-9250-5d997784178b">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="3acb293a-db47-4f67-82a7-95cbc7a231e9"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="9e08ae4c-1b18-4eb6-98a5-a6b9ec510527"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=LHR;outboundDestination=SYD;outboundDate=${#TestCase#outboundDate};inboundOrigin=SYD;inboundDestination=LHR;inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="53de90ae-460e-4b0a-aa6b-4c5cad279a5b"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="fd3fc780-903b-461c-af75-39105e5bb00c"><con:settings/><con:config><script><![CDATA[import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)

int i,j;
for(i=0;i<response.flights.size();i++)
	{
		if(response.flights[i].segments[0].code=="BA0011" && response.flights[i].segments[1].code=="BA0015")
		break
	}
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[i].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[i].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[i].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[i].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[i].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[i].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[i].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[i].segments[0].code.split("(?<=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[i].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[i].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[i].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[i].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[i].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[i].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[i].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[i].segments[1].code.split("(?<=\\D)(?=\\d)")[1])

for(j=0;j<response.flights[i].flights.size();j++)
	{
		if(response.flights[i].flights[j].segments[0].code=="BA0016")
		break
	}

testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[i].flights[j].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[i].flights[j].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[i].flights[j].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[i].flights[j].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[i].flights[j].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[i].flights[j].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[i].flights[j].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[i].flights[j].segments[0].code.split("(?<=\\D)(?=\\d)")[1])

def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)]]></script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="a5816748-8c47-4d9e-8079-c4c5558f60ec"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="e1885660-2230-4611-bfbf-bc826e13158f"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="ecb66aad-7815-4f0a-96f8-65ae77974d3c"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="1d8fee5a-1424-4cfc-a6b6-ddc35b60be40"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="b29f300f-5801-498a-9246-05607b667423"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="1d7af212-16f0-4c5f-b458-f9e3b7f34fe3"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="8072a71d-333f-4100-b760-899e1dbd6ad4"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="3961f195-46a7-4b5d-bc8f-80c51da56f6b" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="e7a266f3-5373-4fd9-91f3-1ed2f0d7dba0" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="0ff248f7-e849-49e4-93cc-84ad782eb0e5" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="9dafa11e-86e7-45d7-97c6-b324b1f784ec" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="d6eb86eb-0107-4bda-a519-0b8e2bb5a392"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="01ca081c-3ad9-4058-a1b0-d0dc6f454786"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>SYD</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100004959345</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004978504</con:value></con:property><con:property><con:name>pnr</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-06</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-13</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>B</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">N</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>BKNC00M7</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">NKNC00B7</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-08T06:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-06T19:05:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>SIN</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0011</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-14T04:55:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-13T16:30:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SYD</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0016</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100003877720</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>B</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>BKNC00M7</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-01-08T06:50:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-01-07T20:05:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>SYD</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>SIN</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0015</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCBA_Booking_MultiJBR" searchProperties="true" id="eb24e29e-3605-486d-96e9-fc5cbcb3c55a">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="4eb9ab21-ff72-4d03-be0a-988436218e6d"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="88bd0f7d-9b9b-45f2-8f9e-ae988e46b6ad"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="3bf907dc-ca36-438e-850d-09407a20db99"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="76a5f047-1b4b-4f20-b577-2103e07b54e6"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])



testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[0].flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("inbound1SellingClass", response.flights[0].flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("inbound1FareBasisCode", response.flights[0].flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("inbound1Cabin", response.flights[0].flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("inbound1Arrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inbound1Departure", response.flights[0].flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("inbound1DestinationAirport", response.flights[0].flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("inbound1OriginAirport", response.flights[0].flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("inbound1FlightNumber", response.flights[0].flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="fdc72705-4a71-4c78-80ef-9c61e96fa9f5"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        },
		{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inbound1Arrival}",
            "cabinCode" : "${#TestCase#inbound1Cabin}",
            "departureDateTime" : "${#TestCase#inbound1Departure}",
            "destinationAirport" : "${#TestCase#inbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inbound1OriginAirport}",
            "sellingClass" : "${#TestCase#inbound1SellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="3726ebc3-9fc4-49ba-9dd2-94a179b52f25"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="c2ee2fd6-0ee2-425b-822b-371467c919a7"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="755b13a4-f048-4754-891d-b3ce08445124"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="5bc4f9cf-eb50-4ef9-84ff-cee8ff5a8e09"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="c71f8d64-55d2-4ef6-a790-855c7877327a"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="8783f8a7-7267-4d33-96c9-fa5fd889e2c5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="f29ac67c-8269-4cba-8180-ad1261d1e930" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="9a775dd3-8877-45e9-8f63-a812334216ef" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="b3820290-d3ef-4bb6-9bac-3883d7fb9f38" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="0458ac2a-cdda-4940-beef-74238e071f91" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="5db52166-7aac-41a5-9445-8f68eb7418eb"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="9bd432f9-ac6c-4c21-8175-a168a899bbef"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="4e1f6d16-09bf-49cd-af43-ae882982bba5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="01a6cb2e-5964-4dcd-9a6c-59b9f93e93b2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="98d90449-ce46-462e-9565-929dc833b28d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestCase#inboundOriginAirport}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestCase#inboundDestinationAirport}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestCase#inboundFlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>
               <pas:FlightStatus>Disrupted</pas:FlightStatus>
               <pas:Flight>
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>
                  <pas:DepartureTime>0000</pas:DepartureTime>
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>
                  <pas:MarketingCarrier>
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>
                     <pas:CarrierCode>BA</pas:CarrierCode>
                  </pas:MarketingCarrier>
               </pas:Flight>
            </pas:OrderLine>
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestCase#inboundOriginAirport}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestCase#inboundDestinationAirport}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestCase#inboundFlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
             <pas:OrderLine>
               <pas:FlightStatus>New</pas:FlightStatus>
               <pas:Flight>
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>
                  <pas:DepartureTime>0000</pas:DepartureTime>
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>
                  <pas:MarketingCarrier>
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>
                     <pas:CarrierCode>BA</pas:CarrierCode>
                  </pas:MarketingCarrier>
               </pas:Flight>
            </pas:OrderLine>

         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005225393</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005245587</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Q5LKUJ</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-13</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-20</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>V</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">O</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>VADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OPLM0V2R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-13T07:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-20T16:40:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-20T08:00:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670356</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>NPLM0V2R</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-01-13T12:10:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value>OADDV2RO</con:value></con:property><con:property><con:name>inbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>inbound1Arrival</con:name><con:value>2020-01-20T16:40:00.000</con:value></con:property><con:property><con:name>inbound1Departure</con:name><con:value>2020-01-20T15:25:00.000</con:value></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value>1334</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking_CB" searchProperties="true" id="4a304cca-bad5-4fd2-b7bb-22abb5bac069">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="a6041f78-1ffd-491a-9ffc-0dc06fab7a2c"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="706f6be5-9f57-45cc-b99b-30e5d664dc79"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="81f1bc6b-d6d6-4734-92fc-de5ab99f6101"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="ddc94897-aafc-43fa-adc0-ff6e320e2ce6"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="e8f5bc00-c6aa-4d1b-ba7e-ca76e7839a0f"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="23275280-527d-42a9-9726-ddd7b199d634"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="c4d3eb99-8cc8-4da2-83c4-4763c4a2c2a7"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="227791fd-b564-4513-9822-bcd80f2435a9"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="b70d5983-2987-45b4-b9f8-656aeb605358"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="7e0b9aa3-62f5-4c30-89c3-f9cb1c5162b1"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="af9aac2f-b30d-41e9-9c74-9e0c0f13d724"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="19b88152-37c7-46fc-a0cb-25fe9ea7a52d" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="cbf6e099-6971-4201-942d-e58925d5aebd" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="57292c00-163f-4c62-8fbe-144760efd55c" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="cc0b26ba-e630-4493-bbac-7730f2333200" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="71bc4269-b5f8-49e8-8c49-c2904545a278"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="a734362b-a301-4764-ba61-a9727688c77e"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="b5bee0ae-33f5-4ee8-8f72-17920b73aef9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="67a07f0d-d37c-48ea-ba57-c32ed975cbd4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="a8bb0726-6f95-4b0c-a4dc-24ab912c5c1f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005304343</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005323504</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">QIG5UF</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-02-05</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-12</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OTLZ0RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-02-05T13:35:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-02-05T07:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670323</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABA_Booking_CB" searchProperties="true" id="2e6c420d-5998-4938-aad9-cda39ed15045">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="78197cd2-7909-4efa-93bb-d9601b22ad81"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="b080d5de-0354-48f2-8b5c-54c853327bb0"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="e64d3b8b-11ab-4722-a71f-ffe5dd8b0ad5"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="f2ca639b-3609-4338-a662-b49b958bb115"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundAircraftType", "321")
testRunner.testCase.setPropertyValue("inboundCabin", "M")
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].departs)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].destination)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].origin)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])



def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="5d995a2e-935b-48d1-8e9f-55b933ede294"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ],
  "inboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#inboundArrival}",
      "cabinCode": "${#TestCase#inboundCabin}",
      "departureDateTime": "${#TestCase#inboundDeparture}",
      "destinationAirport": "${#TestCase#inboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#inboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#inboundOriginAirport}",
      "sellingClass": "${#TestCase#inboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="f3bee1ed-fd18-4fcc-b621-4fabfdf49833"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="9d9e2292-eb5b-494f-bcdc-621d5d11bc53"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="97c6a4b1-ab69-42af-9e85-7b494a70cf7f"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="2d44222f-e472-4e86-8b3b-83e9355bf9ab"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="7ac87c01-3950-4ed5-8257-e3c455e8662e"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="6d93d400-52eb-4c66-8045-2256efdcbc6c"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="39b5b548-9f30-4551-aa76-6248ce38957d" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="e7d1af49-ea39-44cc-91fe-1d84032b91b3" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="206554c0-fa3a-4274-b5f6-63449f955c38" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="218f6962-fb80-48fc-aff3-404905ae3a20" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="58263527-11f6-43a6-88e6-080fb87b449a"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="71da556e-c76a-4743-83c3-6346f457a8f3"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="a98d9e4d-10d8-401a-920b-5d327c683795"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="5b73f5a9-846f-4974-add0-9d2a9a23fb9e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="1b4b99d6-f4cc-482b-9f07-9b9308443ffe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>DUB</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100004759342</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004779501</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">N6NCAF</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-02-04</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-11</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">O</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OPZ0R</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OEIK</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-11-21T07:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-11-21T06:25:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>DUB</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0832</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-11-28T07:55:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2019-11-28T06:20:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LGW</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DUB</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5900</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670327</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABC_Booking_CB" searchProperties="true" id="f62d999f-e9ef-4182-8ec8-9b33e64ea592">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="12f60085-7c95-4103-b071-8c0ea0528571"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="ef853c7c-b8aa-4149-b5ed-02917c8e6b15"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="d0e8aee7-af6c-44f8-8ba4-f574c9a1e659"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="0dbf209d-c8e2-4be0-a959-2bdf7f034461"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="e0ae2fdc-5dfb-4b91-b893-eac601da4fc3"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    },
	 {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outbound1Arrival}",
      "cabinCode": "${#TestCase#outbound1Cabin}",
      "departureDateTime": "${#TestCase#outbound1Departure}",
      "destinationAirport": "${#TestCase#outbound1DestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outbound1FlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outbound1OriginAirport}",
      "sellingClass": "${#TestCase#outbound1SellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="9a7f5ce6-3023-4534-8d9a-b8edda5bfd1d"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="ba39b147-8241-4098-8139-0a2292a51fc5"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="a447cea4-30f1-4b91-a2bf-ea604d4d010d"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="52151b47-d74d-4ea4-8882-fd4bbe65333a"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="0edc92eb-492c-467d-b78b-c9766ad2cac9"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="000e6af1-c553-42cf-ad26-685ef6be429a"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="afe4daab-af1b-4c4e-86a3-b5732782a030" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="05c095c8-7f05-4ccd-8d66-4abd66782c4c" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="4f2dbdf1-1602-41a1-a9f4-4345308eb748" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="471549c1-b1d9-4db1-ae3c-06a7d34e7204" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="f051042f-0761-4e8a-888b-c91755b4cda6"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="c5db0107-8d38-44fe-97a0-ebc8ef642e54"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="e746da81-3475-4beb-aa89-4b9886e72c0f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="ee569d1e-bc20-4b49-a29b-3d012ec06b54"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="3913b0ec-de76-46a8-8bd5-dd0609743503"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100004927458</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100004946714</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OGUPCO</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2019-11-20</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2019-11-27</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>NADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2019-11-20T17:55:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2019-11-20T08:15:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670336</con:value></con:property><con:property><con:name>outbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>L</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>LWLV2RO</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2019-11-20T17:55:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2019-11-20T12:15:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1Date</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1AircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Cabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Arrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1Departure</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCBA_Booking_CB" searchProperties="true" id="efc63dac-ebc7-4c26-b7e4-9f06075b7079">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="83aa96cc-169d-41f7-ac5c-2971a7c1c5c5"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="832ad7af-1995-4a4a-8160-3c217eb2b654"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="fb23daf8-814e-4428-8da1-05347522f01f"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="591f12f8-2f0c-43c8-927f-87cd1e5915a0"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])



testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[0].flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("inbound1SellingClass", response.flights[0].flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("inbound1FareBasisCode", response.flights[0].flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("inbound1Cabin", response.flights[0].flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("inbound1Arrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inbound1Departure", response.flights[0].flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("inbound1DestinationAirport", response.flights[0].flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("inbound1OriginAirport", response.flights[0].flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("inbound1FlightNumber", response.flights[0].flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="521198f5-8084-4e56-b7db-2d6204fdc3ab"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        },
		{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inbound1Arrival}",
            "cabinCode" : "${#TestCase#inbound1Cabin}",
            "departureDateTime" : "${#TestCase#inbound1Departure}",
            "destinationAirport" : "${#TestCase#inbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inbound1OriginAirport}",
            "sellingClass" : "${#TestCase#inbound1SellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="c2484948-faa4-482e-8f4f-30e6c33c2748"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="363d1612-d709-4cd2-91be-4024fbed7800"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="61c140e4-6c6f-4c5b-b3a7-a5d56a818fb0"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="0cfcca54-06ab-45d5-915b-6f016cd0e8e0"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="87be26b4-4f1c-4fa4-8a40-074fa0256365"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="caaaee8c-70b4-4b6b-aeb3-170b818ba25a"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="a82d73a8-d4c7-48b2-a5bb-23062ec94c51" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="1cac0e89-ea2c-4514-8823-ed2587389ff5" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="2196189b-6da5-4446-9df9-ce6d1612d4c7" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="6e1d7802-b247-4f36-b5dc-52e829a497ef" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="c8aa4a33-d6d4-4892-a3fb-23976e6c3e9e"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="0573eb43-f57c-45f4-99d9-8422b3d77759"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="74dfc592-dfd7-4fcb-b558-b50c50c49920"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="85d0288e-5ee3-41aa-bd63-65174156273b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="5dd37957-30ce-4afe-bd14-63d844fb2a6e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005225422</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005245653</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Q5Y8PY</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-31</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-07</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">N</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>OADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">NWLM0V2R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-31T17:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-31T07:45:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-02-07T16:25:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-02-07T08:00:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670356</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>NWLM0V2R</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-01-31T17:50:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-01-31T12:10:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value>V</con:value></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value>VADDV2RO</con:value></con:property><con:property><con:name>inbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>inbound1Arrival</con:name><con:value>2020-02-07T16:25:00.000</con:value></con:property><con:property><con:name>inbound1Departure</con:name><con:value>2020-02-07T15:10:00.000</con:value></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value>1334</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="AB_Booking_MultipleAdults_CB" searchProperties="true" id="4f8f20d5-bd4c-49a1-8577-80fece1d0473">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="5bdce336-9deb-462f-adc7-76c9cbaec44c"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="2dc38eaf-9b67-4521-8107-c7065dbfc4f1"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="5595627a-96b6-4284-a43c-a18b5930ac73"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="b9187228-cf4c-4ec2-bef9-9b461b9609ea"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", "M")
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].departs)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].destination)
testRunner.testCase.setPropertyValue("outboundOriginAirport", response.flights[0].origin)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="3e65b009-0e14-4cc5-97f6-b23a9bece552"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
  "passengerCount": [
   ${#TestCase#passengerCountString}
  ],
  "outboundSegments": [
    {
      "aircraftType": "321",
      "arrivalDateTime": "${#TestCase#outboundArrival}",
      "cabinCode": "${#TestCase#outboundCabin}",
      "departureDateTime": "${#TestCase#outboundDeparture}",
      "destinationAirport": "${#TestCase#outboundDestinationAirport}",
      "fareBasisCodes": [
        {
          "passengerType": "Adult"}
      ],
      "fareBreakPoint": true,
      "handBaggageOnlyFare": false,
      "marketingCarrierCode": "BA",
      "marketingFlightNumber": "${#TestCase#outboundFlightNumber}",
      "operatingCarrierCode": "BA",
      "operatingCarrierName": "British Airways",
      "originAirport": "${#TestCase#outboundOriginAirport}",
      "sellingClass": "${#TestCase#outboundSellingClass}"
    }
  ]
}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="1e3dcbaa-d5e4-4750-952d-5cfb0ce9188f"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="72cd2f24-89b4-415b-851c-dda715201a37"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="94592754-b3e4-4fd1-9196-03b2d383279a"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="200bfcb3-dc8a-4564-91f3-7f3834e8bc1b"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="15ed7c85-46c8-44aa-b34e-18cdbd546746"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="443a6ffa-2bb9-41ae-85d3-44c65e000eae"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="ffb686ce-541f-4993-8e02-e481aae48522" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="22973e76-bf05-4af6-a0fe-e8f409150601" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="e5adae00-59ca-41f7-a200-161627cf0e25" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="60731bd3-0e06-4be6-9c52-b2ce6528b696" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="207c0e06-f9c4-4f81-9e94-806e07800970"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="9f194056-5316-4769-a122-d6dd5e922c07"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="31a94ac0-fbc6-4dd0-960c-8a6ff3492f14"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="aa7ad5e3-e2ca-4264-9994-ae9abc4bbb02"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="d415bcf2-df07-4c64-88f5-77b2a8f300aa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Business</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>1</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005016507</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005036746</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">P5ZCY8</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-27</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-02-03</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>R</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>RNLV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-27T13:30:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-27T07:50:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>0640</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundCabin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundArrival</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDeparture</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2},{"passengerType":"CHILD_AGE_12","count":1},{"passengerType":"Infant","count":1}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100005036747</con:value></con:property></con:properties>
        </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ABCBA_Booking_MultiJBR_CB" searchProperties="true" id="8abef0f3-16ee-4ffa-9ff2-9b1e5fee46db">
            <con:settings/>
            <con:testStep type="groovy" name="Update_Dates" id="9f80deea-f9e1-4969-82e4-27450d18b64b"><con:settings/><con:config><script>def today = new Date()
def outbound = today + Math.abs(new Random().nextInt() % 100) + 50
Calendar cal = Calendar.getInstance();
cal.setTime(outbound);
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
	outbound = outbound + 2
}
def inbound = outbound + 7
testRunner.testCase.setPropertyValue("outboundDate", outbound.format("yyyy-MM-dd"))
testRunner.testCase.setPropertyValue("inboundDate", inbound.format("yyyy-MM-dd"))

if (context.paaSearches == null){
	context.paaSearches = 1
}else{
	context.paaSearches = context.paaSearches+1
}</script></con:config></con:testStep><con:testStep type="httprequest" name="GetAvailability" id="322b6055-5c21-4fdb-b778-0c22b6d8120a"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetAvailability" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#PAA_HOST_URL}/badotcomadapter-paa/rs/v1/flights/fares;outboundOrigin=${#TestCase#i_Origin};outboundDestination=${#TestCase#i_Destination};outboundDate=${#TestCase#outboundDate};inboundOrigin=${#TestCase#i_Destination};inboundDestination=${#TestCase#i_Origin};inboundDate=${#TestCase#inboundDate};adultCount=${#TestCase#i_adultCount};youthCount=${#TestCase#i_youthCount};childCount=${#TestCase#i_childCount};infantCount=${#TestCase#i_infantCount};cabins=${#TestCase#i_cabins};ticketFlexibility=RESTRICTED;maxPointsEarningFare=false;language=EN;includeCalendar=true</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="LoopAvailability" id="f44490b8-49cd-42e0-b89f-56682a35e684"><con:settings/><con:config><script>import groovy.json.JsonSlurper
import java.util.regex.Pattern
import java.util.regex.Matcher

responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pattern = Pattern.compile("([^\\d]+)(.*)")
log.info(pattern)
def flights = response.flights
for (flight in flights){
	
	if (flight.segments.size() > 1){
		continue;
	}

	def cabins = flight.cabins
	for (cabin in cabins){
		if (cabin.availability.equals("0")){
			continue
		}

		Matcher matcher = pattern.matcher(flight.segments[0].code)
		matcher.matches()

		testRunner.testCase.setPropertyValue("outboundSellingClass", cabin.segments[0].sellingClass)
		testRunner.testCase.setPropertyValue("outboundFareBasisCode", cabin.segments[0].fareBasisCode)
		testRunner.testCase.setPropertyValue("outboundCabin", cabin.segments[0].cabinCode)
		testRunner.testCase.setPropertyValue("outboundArrival", flight.arrives)
		testRunner.testCase.setPropertyValue("outboundDeparture", flight.departs)
		testRunner.testCase.setPropertyValue("outboundDestinationAirport", flight.destination)
		testRunner.testCase.setPropertyValue("outboundOriginAirport", flight.origin)
		testRunner.testCase.setPropertyValue("outboundFlightNumber", matcher.group(2))
		
		//if we get here we must have found a cabin on a single sector flight that has a space
		//we can set values and move to next step which will leave script at this point
		testRunner.gotoStepByName( "CreateBasket" ) 		
	}
}

//if we get here we have looped through all flights and cabins and they are all dodgy.
//update the dates and go again.
if(context.paaSearches == testRunner.testCase.testSuite.getPropertyValue("availability_retry")){
	testRunner.gotoStepByName( "Update_Dates" )
}




</script></con:config></con:testStep><con:testStep type="groovy" name="SetDefaultAvailabilityProperties" id="96714b66-9dd4-4d7f-bca7-0e857d8d1395"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetAvailability").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
testRunner.testCase.setPropertyValue("outboundSellingClass", response.flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("outboundFareBasisCode", response.flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("outboundCabin", response.flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("outboundArrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outboundDeparture", response.flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("outboundDestinationAirport", response.flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("outboundOriginAirport",response.flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("outboundFlightNumber", response.flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])


testRunner.testCase.setPropertyValue("outbound1SellingClass", response.flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("outbound1FareBasisCode", response.flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("outbound1Cabin", response.flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("outbound1Arrival", response.flights[0].arrives)
testRunner.testCase.setPropertyValue("outbound1Departure", response.flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("outbound1DestinationAirport", response.flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("outbound1OriginAirport",response.flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("outbound1FlightNumber", response.flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])



testRunner.testCase.setPropertyValue("inboundSellingClass", response.flights[0].flights[0].cabins[0].segments[0].sellingClass)
testRunner.testCase.setPropertyValue("inboundFareBasisCode", response.flights[0].flights[0].cabins[0].segments[0].fareBasisCode)
testRunner.testCase.setPropertyValue("inboundCabin", response.flights[0].flights[0].cabins[0].segments[0].cabinCode)
testRunner.testCase.setPropertyValue("inboundArrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inboundDeparture", response.flights[0].flights[0].segments[0].departure)
testRunner.testCase.setPropertyValue("inboundDestinationAirport", response.flights[0].flights[0].segments[0].arrivalAirport)
testRunner.testCase.setPropertyValue("inboundOriginAirport", response.flights[0].flights[0].segments[0].departureAirport)
testRunner.testCase.setPropertyValue("inboundFlightNumber", response.flights[0].flights[0].segments[0].code.split("(?&lt;=\\D)(?=\\d)")[1])

testRunner.testCase.setPropertyValue("inbound1SellingClass", response.flights[0].flights[0].cabins[0].segments[1].sellingClass)
testRunner.testCase.setPropertyValue("inbound1FareBasisCode", response.flights[0].flights[0].cabins[0].segments[1].fareBasisCode)
testRunner.testCase.setPropertyValue("inbound1Cabin", response.flights[0].flights[0].cabins[0].segments[1].cabinCode)
testRunner.testCase.setPropertyValue("inbound1Arrival", response.flights[0].flights[0].arrives)
testRunner.testCase.setPropertyValue("inbound1Departure", response.flights[0].flights[0].segments[1].departure)
testRunner.testCase.setPropertyValue("inbound1DestinationAirport", response.flights[0].flights[0].segments[1].arrivalAirport)
testRunner.testCase.setPropertyValue("inbound1OriginAirport", response.flights[0].flights[0].segments[1].departureAirport)
testRunner.testCase.setPropertyValue("inbound1FlightNumber", response.flights[0].flights[0].segments[1].code.split("(?&lt;=\\D)(?=\\d)")[1])


def passengerCount = "{\"passengerType\":\"Adult\",\"count\":"
passengerCount = passengerCount+testRunner.testCase.getPropertyValue("i_adultCount")+"}"
if(testRunner.testCase.getPropertyValue("i_youthCount")!="0" || testRunner.testCase.getPropertyValue("i_youthCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"CHILD_AGE_12\",\"count\":"+testRunner.testCase.getPropertyValue("i_youthCount")+"}"
if(testRunner.testCase.getPropertyValue("i_childCount")!="0" || testRunner.testCase.getPropertyValue("i_childCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Child\",\"count\":"+testRunner.testCase.getPropertyValue("i_childCount")+"}"
if(testRunner.testCase.getPropertyValue("i_infantCount")!="0" || testRunner.testCase.getPropertyValue("i_infantCount")=="" )
passengerCount = passengerCount+","+"{\"passengerType\":\"Infant\",\"count\":"+testRunner.testCase.getPropertyValue("i_infantCount")+"}"

testRunner.testCase.setPropertyValue("passengerCountString",passengerCount)</script></con:config></con:testStep><con:testStep type="httprequest" name="CreateBasket" id="71269757-327b-450e-8a2a-16023879c28e"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="CreateBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets</con:endpoint><con:request>{
    "passengerCount" : [
        ${#TestCase#passengerCountString}
    ],
    "outboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outboundArrival}",
            "cabinCode" : "${#TestCase#outboundCabin}",
            "departureDateTime" : "${#TestCase#outboundDeparture}",
            "destinationAirport" : "${#TestCase#outboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outboundOriginAirport}",
            "sellingClass" : "${#TestCase#outboundSellingClass}"
        },{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#outbound1Arrival}",
            "cabinCode" : "${#TestCase#outbound1Cabin}",
            "departureDateTime" : "${#TestCase#outbound1Departure}",
            "destinationAirport" : "${#TestCase#outbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#outbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#outbound1OriginAirport}",
            "sellingClass" : "${#TestCase#outbound1SellingClass}"
        }
    ],
    "inboundSegments" : [{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inboundArrival}",
            "cabinCode" : "${#TestCase#inboundCabin}",
            "departureDateTime" : "${#TestCase#inboundDeparture}",
            "destinationAirport" : "${#TestCase#inboundDestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inboundFlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inboundOriginAirport}",
            "sellingClass" : "${#TestCase#inboundSellingClass}"
        },
		{
            "aircraftType" : "321",
            "arrivalDateTime" : "${#TestCase#inbound1Arrival}",
            "cabinCode" : "${#TestCase#inbound1Cabin}",
            "departureDateTime" : "${#TestCase#inbound1Departure}",
            "destinationAirport" : "${#TestCase#inbound1DestinationAirport}",
            "fareBasisCodes" : [{
                    "passengerType" : "Adult"
                }
            ],
            "fareBreakPoint" : true,
            "handBaggageOnlyFare" : false,
            "marketingCarrierCode" : "BA",
            "marketingFlightNumber" : "${#TestCase#inbound1FlightNumber}",
            "operatingCarrierCode" : "BA",
            "operatingCarrierName" : "British Airways",
            "originAirport" : "${#TestCase#inbound1OriginAirport}",
            "sellingClass" : "${#TestCase#inbound1SellingClass}"
        }
    ]
}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_BasketId" id="714cca7e-bdc5-4b46-8e8e-51cfbf4f2d1c"><con:settings/><con:config><script>responseContent = testRunner.testCase.getTestStepByName("CreateBasket").testRequest.response.getResponseHeaders()
def location = responseContent["Location"]
def splitArray = location[0].split("/")
def basketId = splitArray[splitArray.size()-1]
testRunner.testCase.setPropertyValue("basketId", basketId)
</script></con:config></con:testStep><con:testStep type="httprequest" name="GetBasket" id="71c59ca6-5e64-4d79-b3c3-9f5acbff540a"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="QuoteBasket" id="99fe1625-a7ae-4be0-8b97-e57c9c8317c7"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="QuoteBasket" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/quotes</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetBasketAfterQuote" id="80219f20-03c7-4dfe-b3cd-c89333fd8d7a"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetBasketAfterQuote" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="GetPassenger" id="36233735-bd9b-4121-b831-7d7b02354d23"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="GetPassenger" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers</con:endpoint><con:request>{"passengerCount":[{"passengerType":"Adult","count":1}],"outboundSegments":[{"aircraftType":"321","arrivalDateTime":"2018-04-12T10:45:00.000","availability":9,"cabinCode":"M","departureDateTime":"2018-04-12T07:35:00.000","destinationAirport":"OSL","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"QNM0V2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0762","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"LHR","sellingClass":"Q"}],"inboundSegments":[{"aircraftType":"319","arrivalDateTime":"2018-04-19T09:15:00.000","availability":7,"cabinCode":"M","departureDateTime":"2018-04-19T07:45:00.000","destinationAirport":"LHR","fareBasisCodes":[{"passengerType":"Adult","fareBasisCode":"NV2R"}],"fareBreakPoint":true,"handBaggageOnlyFare":false,"marketingCarrierCode":"BA","marketingFlightNumber":"0761","operatingCarrierCode":"BA","operatingCarrierName":"British Airways","originAirport":"OSL","sellingClass":"N"}]}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PassengerId" id="9e605ea3-f7a3-4b2e-8261-a8a98d85b0a8"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("GetPassenger").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
//def passengerId = response.passengerDescriptions[0].id
//testRunner.testCase.setPropertyValue("passengerId",passengerId)
int i;

for(i=0;i&lt;response.passengerDescriptions.size();i++)
{
	if(response.passengerDescriptions[i].type == "Adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		log.info("Adult")
		tStep1 = context.testCase.testSteps["Adult"]
		tStep1.run(testRunner, context)
		
	}

	else if(response.passengerDescriptions[i].type == "Young adult")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["YoungAdult"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Child")
	{
		testRunner.testCase.setPropertyValue("passengerId",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Child"]
		tStep1.run(testRunner, context)
	}
	else if(response.passengerDescriptions[i].type == "Infant")
	{
		log.info("Infant")
		testRunner.testCase.setPropertyValue("passengerIdinfant",response.passengerDescriptions[i].id)
		tStep1 = context.testCase.testSteps["Infant"]
		tStep1.run(testRunner, context)
	}
	
}

  sleep(10000)</script></con:config></con:testStep><con:testStep type="httprequest" name="Adult" id="e24c0b6f-a29e-44a6-84de-def5e474a87e" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Adult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"AdultF","lastName":"AdultL","contactDetails":{"email":"test_email@hotmail.com","phone":"+44 1234567890"}}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="YoungAdult" id="ddd2d399-d4a1-416f-bf89-c4438b01a169" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="YoungAdult" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Mr","firstName":"YouthF","lastName":"YouthL","dateOfBirth": "2007-04-01T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Child" id="885d58b8-7a01-4295-9f66-2eb32b7e66ee" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Child" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerId}</con:endpoint><con:request>{"passenger":{"title":"Miss","firstName":"childF","lastName":"childL"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Infant" id="1c7b731b-479f-46c5-9425-c4a5e4a9f820" disabled="true"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="Infant" postQueryString="false" mediaType="application/json" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="1"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/sse-sbkm/rs/v2/customers/baskets/${#TestCase#basketId}/passengers/${#TestCase#passengerIdinfant}</con:endpoint><con:request>{"passenger":{"title":"Mstr","firstName":"InfantF","lastName":"InfantL","dateOfBirth":"2018-03-02T12:00:00.000Z"}}
</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="PurchaseBasket" id="242760ad-d15e-4b89-aab8-352b7c73bccc"><con:settings/><con:config method="PUT" xsi:type="con:HttpRequest" id="6dd472f2-e353-4a7d-8241-a9544453f3b6" name="PurchaseBasket" postQueryString="false" mediaType="application/json" timeout="300000" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="If-Match" value="${=${#TestCase#i_adultCount}+${#TestCase#i_infantCount}+${#TestCase#i_youthCount}+${#TestCase#i_childCount}+2}"/>
  &lt;con:entry key="ba_client_applicationName" value="soapUi"/>
  &lt;con:entry key="ba_sec_sessionId" value="${#TestSuite#sec_session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#HOST_URL}/${#Project#SERVICE_OVERRIDE}/rs/v1/orders;bid=${#TestCase#basketId}</con:endpoint><con:request>{"payer":{"passengerId":"${#TestCase#passengerId}","email":"test_email@hotmail.com"},"paymentMethod":"Card","cardDetails":{"number":"7777152766807395","type":"Visa Personal","expiryDate":"03/2021","csc":"123","name":"Mr John Smith"},"billingAddress":{"line1":"9","line2":"${#Project#SERVICE_OVERRIDE}","postalCode":"RM11 1AB"},"billingCountry":"GB","holdBooking":false,"deviceFingerprint":""}</con:request><con:assertion type="Valid HTTP Status Codes" id="73504f7a-f536-4504-965e-adc6153b3117" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="groovy" name="Update_PNR" id="69bbc5f7-8302-49ae-8f25-12a47866b3bd"><con:settings/><con:config><script>import groovy.json.JsonSlurper
responseContent = testRunner.testCase.getTestStepByName("PurchaseBasket").getPropertyValue("response")
response = new JsonSlurper().parseText(responseContent)
def pnr = response.reference

testRunner.testCase.setPropertyValue("pnr", pnr)

        sleep(1000)</script></con:config></con:testStep><con:testStep type="request" name="Security_TrustedUserSignIn" id="671e4c0e-005d-4b9c-8bde-864162ce6b79"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>Security_TrustedUserSignIn</con:operation><con:request name="Security_TrustedUserSignIn" id="88664665-45f5-4d8b-9f92-98d1d302eaf3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:vls="http://xml.amadeus.com/VLSTLQ_07_2_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId/>
         <wbs:SequenceNumber/>
         <wbs:SecurityToken/>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <vls:Security_TrustedUserSignIn xmlns="http://xml.amadeus.com/VLSTLQ_11_1_1A" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>U</vls:originatorTypeCode>
            <vls:originator>${#Project#UserID}</vls:originator>
         </vls:userIdentifier>
         <vls:userIdentifier xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:originIdentification>
               <vls:inHouseIdentification1>${#Project#OfficeID}</vls:inHouseIdentification1>
            </vls:originIdentification>
            <vls:originatorTypeCode>Z</vls:originatorTypeCode>
            <vls:originator>0001AA</vls:originator>
         </vls:userIdentifier>
         <vls:dutyCode xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:referenceDetails>
               <vls:type>DUT</vls:type>
               <vls:value>SU</vls:value>
            </vls:referenceDetails>
         </vls:dutyCode>
         <vls:systemDetails xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationId>BA/A/LHR/T/5/CKI/01/01</vls:workstationId>
            <vls:deliveringSystem>
               <vls:companyId>BA</vls:companyId>
            </vls:deliveringSystem>
            <vls:idQualifier>W</vls:idQualifier>
         </vls:systemDetails>
         <vls:roleDataSection xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:labelOfRole>
               <vls:roleLabel>CM07ADMINSUPPORTFULLACCESS</vls:roleLabel>
            </vls:labelOfRole>
            <vls:roleApplication>
               <vls:applicationDetails>
                  <vls:label>GLOBAL</vls:label>
               </vls:applicationDetails>
            </vls:roleApplication>
            <vls:roleOwner>
               <vls:organizationDetails>
                  <vls:label>BA</vls:label>
               </vls:organizationDetails>
            </vls:roleOwner>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>BPT</vls:attributeType>
                     <vls:attributeDescription>*</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>CM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
            <vls:roleData>
               <vls:dataTypeAndValue>
                  <vls:attributeDetails>
                     <vls:attributeType>CAR</vls:attributeType>
                     <vls:attributeDescription>BA</vls:attributeDescription>
                  </vls:attributeDetails>
               </vls:dataTypeAndValue>
               <vls:dataApplication>
                  <vls:applicationDetails>
                     <vls:label>FM</vls:label>
                  </vls:applicationDetails>
               </vls:dataApplication>
               <vls:dataOrganization>
                  <vls:organizationDetails>
                     <vls:label>BA</vls:label>
                  </vls:organizationDetails>
               </vls:dataOrganization>
            </vls:roleData>
         </vls:roleDataSection>
         <vls:fullLocation xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:workstationPos>
               <vls:locationType>ZZZ</vls:locationType>
               <vls:locationDescription>
                  <vls:code>MAN</vls:code>
                  <vls:qualifier>139</vls:qualifier>
               </vls:locationDescription>
               <vls:firstLocationDetails>
                  <vls:code>5</vls:code>
                  <vls:qualifier>180</vls:qualifier>
               </vls:firstLocationDetails>
            </vls:workstationPos>
            <vls:locationInfo>
               <vls:facilityDetails>
                  <vls:type>CKI</vls:type>
                  <vls:identifier>01</vls:identifier>
               </vls:facilityDetails>
            </vls:locationInfo>
         </vls:fullLocation>
         <vls:allocateCrt xmlns:amad="http://www.ba.com/spa/amadeus">
            <vls:statusDetails>
               <vls:indicator>Y</vls:indicator>
               <vls:type>CRT</vls:type>
            </vls:statusDetails>
         </vls:allocateCrt>
      </vls:Security_TrustedUserSignIn>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="99a95dd8-859a-47ed-8a98-cc9d25d0cef3" name="Script Assertion"><con:configuration><scriptText>def xml = new XmlSlurper().parseText(context.response)
def sessionID = xml.'**'.findAll{it.name() == 'SessionId'}[0]
def securityToken = xml.'**'.findAll{it.name() == 'SecurityToken'}[0]
def sessionID0 = "${sessionID[0]}"
def securityToken0 = "${securityToken[0]}"


messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SessionID" ,sessionID0)
messageExchange.modelItem.testStep.testCase.testSuite.project.setPropertyValue("SecurityToken" ,securityToken0)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="PNR_Retrieve" id="044ca09f-4409-4534-86dd-fe61becebf78"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>AmadeusWebServicesBinding</con:interface><con:operation>PNR_Retrieve</con:operation><con:request name="PNR_Retrieve" id="c9fc2bc7-e675-4d43-8146-645f0ecd06f4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://AmadeusWSTest.baplc.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wbs="http://xml.amadeus.com/ws/2009/01/WBS_Session-2.0.xsd" xmlns:pnr="http://xml.amadeus.com/PNRRET_09_1_1A">
   <soapenv:Header>
      <wbs:Session>
         <wbs:SessionId>${#Project#SessionId}</wbs:SessionId>
         <wbs:SequenceNumber>1</wbs:SequenceNumber>
         <wbs:SecurityToken>${#Project#SecurityToken}</wbs:SecurityToken>
      </wbs:Session>
   </soapenv:Header>
   <soapenv:Body>
      <pnr:PNR_Retrieve>
         <retrievalFacts>
            <retrieve>
               <type>2</type>
            </retrieve>
            <reservationOrProfileIdentifier>
               <reservation>
                  <controlNumber>${#TestCase#pnr}</controlNumber>
               </reservation>
            </reservationOrProfileIdentifier>
         </retrievalFacts>
      </pnr:PNR_Retrieve>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="GroovyScriptAssertion" id="a80de69f-4205-4104-b860-df17128c8b4d" name="Script Assertion"><con:configuration><scriptText>import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Calendar;

def xml = new XmlSlurper().parseText(context.response)

def segment = xml.Body.PNR_Reply.originDestinationDetails.itineraryInfo
int i
for(i=0;i&lt;segment.size();i++)
if(segment[i].elementManagementItinerary.segmentName!="AIR")
break

String sourceDate = segment[i-1].travelProduct.product.depDate;
SimpleDateFormat sdf = new SimpleDateFormat("ddMMyy");
Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar
calendar.add(Calendar.DATE, 1);  // number of days to add
String newDate = sdf.format(calendar.getTime());  

messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightNumber" ,""+segment[i-1].travelProduct.productDetails.identification)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Origin" ,""+segment[i-1].travelProduct.boardpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Destination" ,""+segment[i-1].travelProduct.offpointDetail.cityCode)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("Class" ,""+segment[i-1].travelProduct.productDetails.classOfService)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateOld" ,""+segment[i-1].travelProduct.product.depDate)
messageExchange.modelItem.testStep.testCase.testSuite.setPropertyValue("FlightDateNew" ,newDate)</scriptText></con:configuration></con:assertion><con:credentials><con:username>n433999</con:username><con:password>Sep@201999</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="JBR" id="18f41ce0-0e78-4c9f-82b6-73cbdc7d80a6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>passengerReaccommodatePortTypeSoap11</con:interface><con:operation>ReaccommodatePassenger</con:operation><con:request name="JBR" id="fbaac82f-9cca-4535-a29a-0b265dc9dd3d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="ba_client_applicationName" value="BA.COM" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://caws03-prl.baplc.com/orm-prac/ws/PassengerReaccommodationV03</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pas="http://www.ba.com/schema/orm/PassengerReAccommodationV03">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <pas:ReaccommodatePassengerRequest>\r
         <pas:Headers>\r
            <pas:CustomHeaderParameters>\r
               <pas:Name>ba_client_applicationName</pas:Name>\r
               <pas:Value>BA.COM</pas:Value>\r
            </pas:CustomHeaderParameters>\r
         </pas:Headers>\r
         <pas:Order>\r
            <pas:OrderNumber>${#TestCase#pnr}</pas:OrderNumber>\r
            <pas:Remark>INVOL CHG BY PASSENGER REACCOMMODATION SERVICE ROBOTIC</pas:Remark>\r
            <pas:OrderLine>\r
               <pas:FlightStatus>Disrupted</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestCase#inboundOriginAirport}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestCase#inboundDestinationAirport}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestCase#inboundFlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
            <pas:OrderLine>
               <pas:FlightStatus>Disrupted</pas:FlightStatus>
               <pas:Flight>
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>
                  <pas:DepartureDate>${#TestSuite#FlightDateOld}</pas:DepartureDate>
                  <pas:DepartureTime>0000</pas:DepartureTime>
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>
                  <pas:MarketingCarrier>
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>
                     <pas:CarrierCode>BA</pas:CarrierCode>
                  </pas:MarketingCarrier>
               </pas:Flight>
            </pas:OrderLine>
            <pas:OrderLine>\r
               <pas:FlightStatus>New</pas:FlightStatus>\r
               <pas:Flight>\r
                  <pas:DepartureAirportIATACode>${#TestCase#inboundOriginAirport}</pas:DepartureAirportIATACode>\r
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>\r
                  <pas:DepartureTime>0000</pas:DepartureTime>\r
                  <pas:ArrivalAirportIATACode>${#TestCase#inboundDestinationAirport}</pas:ArrivalAirportIATACode>\r
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>\r
                  <pas:MarketingCarrier>\r
                     <pas:FlightNumber>${#TestCase#inboundFlightNumber}</pas:FlightNumber>\r
                     <pas:CarrierCode>BA</pas:CarrierCode>\r
                  </pas:MarketingCarrier>\r
               </pas:Flight>\r
            </pas:OrderLine>\r
             <pas:OrderLine>
               <pas:FlightStatus>New</pas:FlightStatus>
               <pas:Flight>
                  <pas:DepartureAirportIATACode>${#TestSuite#Origin}</pas:DepartureAirportIATACode>
                  <pas:DepartureDate>${#TestSuite#FlightDateNew}</pas:DepartureDate>
                  <pas:DepartureTime>0000</pas:DepartureTime>
                  <pas:ArrivalAirportIATACode>${#TestSuite#Destination}</pas:ArrivalAirportIATACode>
                  <pas:OperatingSellingClass>${#TestSuite#Class}</pas:OperatingSellingClass>
                  <pas:MarketingCarrier>
                     <pas:FlightNumber>${#TestSuite#FlightNumber}</pas:FlightNumber>
                     <pas:CarrierCode>BA</pas:CarrierCode>
                  </pas:MarketingCarrier>
               </pas:Flight>
            </pas:OrderLine>

         </pas:Order>\r
      </pas:ReaccommodatePassengerRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>sec_session_id</con:name><con:value/></con:property><con:property><con:name>i_Origin</con:name><con:value>NCL</con:value></con:property><con:property><con:name>i_Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>i_cabins</con:name><con:value>Economy</con:value></con:property><con:property><con:name>i_adultCount</con:name><con:value>2</con:value></con:property><con:property><con:name>i_infantCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_youthCount</con:name><con:value>0</con:value></con:property><con:property><con:name>i_childCount</con:name><con:value>0</con:value></con:property><con:property><con:name>basketId</con:name><con:value>100005225393</con:value></con:property><con:property><con:name>passengerId</con:name><con:value>100005245587</con:value></con:property><con:property><con:name>pnr</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Q5LKUJ</con:value></con:property><con:property><con:name>bookedAmount</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundDate</con:name><con:value>2020-01-13</con:value></con:property><con:property><con:name>inboundDate</con:name><con:value>2020-01-20</con:value></con:property><con:property><con:name>outboundSellingClass</con:name><con:value>V</con:value></con:property><con:property><con:name>inboundSellingClass</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">O</con:value></con:property><con:property><con:name>outboundFareBasisCode</con:name><con:value>VADDV2RO</con:value></con:property><con:property><con:name>inboundFareBasisCode</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">OPLM0V2R</con:value></con:property><con:property><con:name>flightLink</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>segmentId</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>seatNumber</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>outboundCabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outboundArrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outboundDeparture</con:name><con:value>2020-01-13T07:55:00.000</con:value></con:property><con:property><con:name>outboundDestinationAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outboundOriginAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>outboundFlightNumber</con:name><con:value>1321</con:value></con:property><con:property><con:name>inboundAircraftType</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">321</con:value></con:property><con:property><con:name>inboundCabin</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">M</con:value></con:property><con:property><con:name>inboundArrival</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-20T16:40:00.000</con:value></con:property><con:property><con:name>inboundDeparture</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2020-01-20T08:00:00.000</con:value></con:property><con:property><con:name>inboundDestinationAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LHR</con:value></con:property><con:property><con:name>inboundOriginAirport</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ATH</con:value></con:property><con:property><con:name>inboundFlightNumber</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0631</con:value></con:property><con:property><con:name>passengerCountString</con:name><con:value>{"passengerType":"Adult","count":2}</con:value></con:property><con:property><con:name>passengerIdinfant</con:name><con:value>100008670356</con:value></con:property><con:property><con:name>outbound1SellingClass</con:name><con:value>N</con:value></con:property><con:property><con:name>outbound1FareBasisCode</con:name><con:value>NPLM0V2R</con:value></con:property><con:property><con:name>outbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>outbound1Arrival</con:name><con:value>2020-01-13T17:50:00.000</con:value></con:property><con:property><con:name>outbound1Departure</con:name><con:value>2020-01-13T12:10:00.000</con:value></con:property><con:property><con:name>outbound1DestinationAirport</con:name><con:value>ATH</con:value></con:property><con:property><con:name>outbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>outbound1FlightNumber</con:name><con:value>0632</con:value></con:property><con:property><con:name>inbound1SellingClass</con:name><con:value>O</con:value></con:property><con:property><con:name>inbound1FareBasisCode</con:name><con:value>OADDV2RO</con:value></con:property><con:property><con:name>inbound1Cabin</con:name><con:value>M</con:value></con:property><con:property><con:name>inbound1Arrival</con:name><con:value>2020-01-20T16:40:00.000</con:value></con:property><con:property><con:name>inbound1Departure</con:name><con:value>2020-01-20T15:25:00.000</con:value></con:property><con:property><con:name>inbound1DestinationAirport</con:name><con:value>NCL</con:value></con:property><con:property><con:name>inbound1OriginAirport</con:name><con:value>LHR</con:value></con:property><con:property><con:name>inbound1FlightNumber</con:name><con:value>1334</con:value></con:property></con:properties>
        </con:testCase><con:properties><con:property><con:name>sec_session_id</con:name><con:value>123456</con:value></con:property><con:property><con:name>FlightNumber</con:name><con:value>640</con:value></con:property><con:property><con:name>Origin</con:name><con:value>LHR</con:value></con:property><con:property><con:name>Destination</con:name><con:value>ATH</con:value></con:property><con:property><con:name>Class</con:name><con:value>N</con:value></con:property><con:property><con:name>FlightDateOld</con:name><con:value>130120</con:value></con:property><con:property><con:name>FlightDateNew</con:name><con:value>140120</con:value></con:property></con:properties>
    </con:testSuite><con:properties><con:property><con:name>HOST_URL</con:name><con:value>caws07-prl.baplc.com</con:value></con:property><con:property>
                    <con:name>STUBO_PROTOCOL</con:name><con:value>HTTP</con:value></con:property>
                    <con:property><con:name>STUBO_SESSION_ID</con:name><con:value>ORM-AOR-SESSION1</con:value></con:property>
                    <con:property><con:name>STUBO_HOST</con:name><con:value>stubo-captwo-pint.baplc.com:8001</con:value></con:property>
                    <con:property><con:name>STUBO_SCENARIO_ID</con:name><con:value>ORM-AOR-SCENARIO1</con:value></con:property>
                    <con:property><con:name>RELEASE_LOCATION</con:name><con:value>trunk</con:value></con:property>
                    <con:property><con:name>STUBO_INTEGRATION_CONTROL</con:name><con:value>prepend-method-name;use-json-serialisation-v3</con:value></con:property>
    <con:property><con:name>PAA_HOST_URL</con:name><con:value>caws08-prl.baplc.com</con:value></con:property><con:property><con:name>SERVICE_OVERRIDE</con:name><con:value>orm-obk</con:value></con:property><con:property><con:name>JBR_URL</con:name><con:value>caws03-prl.baplc.com</con:value></con:property><con:property><con:name>SessionID</con:name><con:value>03OCJMKC9U</con:value></con:property><con:property><con:name>SecurityToken</con:name><con:value>ABOYUE0QXNWV2Z0H9TXV83QDJ</con:value></con:property><con:property><con:name>UserID</con:name><con:value>P700818</con:value></con:property><con:property><con:name>OfficeID</con:name><con:value>LHRBA001T</con:value></con:property></con:properties>
    
    <con:wssContainer/>
    <con:oAuth2ProfileContainer/>
    <con:oAuth1ProfileContainer/><con:sensitiveInformation/>
</con:soapui-project>